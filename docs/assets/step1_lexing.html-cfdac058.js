import{_ as i,r,o as c,c as u,b as s,d as a,e,a as p,w as l}from"./app-c52f5eff.js";const k={},d={href:"https://github.com/chevrotain/chevrotain/tree/master/examples/tutorial/step1_lexing",target:"_blank",rel:"noopener noreferrer"},m={href:"https://chevrotain.io/documentation/11_1_0/interfaces/IToken.html",target:"_blank",rel:"noopener noreferrer"},g={href:"https://chevrotain.io/documentation/11_1_0/modules.html#createToken",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/chevrotain/chevrotain/blob/master/examples/lexer/keywords_vs_identifiers/keywords_vs_identifiers.js",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/chevrotain/chevrotain/blob/master/examples/lexer/token_groups/token_groups.js",target:"_blank",rel:"noopener noreferrer"};function b(y,n){const t=r("ExternalLinkIcon"),o=r("RouterLink");return c(),u("div",null,[n[30]||(n[30]=s("h1",{id:"lexer",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#lexer","aria-hidden":"true"},"#"),a(" Lexer")],-1)),n[31]||(n[31]=s("h3",{id:"tldr",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#tldr","aria-hidden":"true"},"#"),a(" TLDR")],-1)),s("p",null,[s("a",d,[n[0]||(n[0]=a("Run and Debug the source code")),e(t)]),n[1]||(n[1]=a("."))]),n[32]||(n[32]=p(`<h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction" aria-hidden="true">#</a> Introduction</h2><p>In this tutorial we will implement a Lexer for a simple SQL Select statement language:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1 <span class="token keyword">FROM</span> table2
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> age <span class="token keyword">FROM</span> persons <span class="token keyword">WHERE</span> age <span class="token operator">&gt;</span> <span class="token number">100</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("p",null,[n[3]||(n[3]=a("A Lexer transforms a string input into a ")),s("a",m,[n[2]||(n[2]=a("Token")),e(t)]),n[4]||(n[4]=a(" vector. Chevrotain has a built in Lexer engine based on Javascript Regular Expressions."))]),n[33]||(n[33]=p(`<h2 id="our-first-token" tabindex="-1"><a class="header-anchor" href="#our-first-token" aria-hidden="true">#</a> Our First Token</h2><p>To use the Chevrotain lexer the Tokens must first be defined. Lets examine the definition for a &quot;FROM&quot; Token:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> createToken <span class="token operator">=</span> chevrotain<span class="token punctuation">.</span>createToken<span class="token punctuation">;</span>
<span class="token comment">// using createToken API</span>
<span class="token keyword">const</span> From <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;From&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">FROM</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3)),s("p",null,[n[7]||(n[7]=a("There is nothing much to it. We simply use the ")),s("a",g,[n[5]||(n[5]=s("strong",null,"createToken",-1)),n[6]||(n[6]=a(" API")),e(t)]),n[8]||(n[8]=a(" to define the tokens, and provide it with a ")),n[9]||(n[9]=s("code",null,"name",-1)),n[10]||(n[10]=a(" property and a ")),n[11]||(n[11]=s("code",null,"pattern",-1)),n[12]||(n[12]=a(" property which is a RegExp which will be used when splitting up the input string into separate Tokens."))]),n[34]||(n[34]=p(`<h2 id="more-complex-tokens" tabindex="-1"><a class="header-anchor" href="#more-complex-tokens" aria-hidden="true">#</a> More complex Tokens</h2><p>How can we define Tokens for Identifiers or Integers?</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> Identifier <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-zA-Z]\\w*</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Integer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">0|[1-9]\\d*</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="skipping-tokens" tabindex="-1"><a class="header-anchor" href="#skipping-tokens" aria-hidden="true">#</a> Skipping Tokens</h2><p>The obvious use case in this language (and many others) is <strong>whitespace</strong>. skipping certain Tokens is easily accomplished by marking them with the SKIP group.</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> WhiteSpace <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;WhiteSpace&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">group</span><span class="token operator">:</span> chevrotain<span class="token punctuation">.</span>Lexer<span class="token punctuation">.</span><span class="token constant">SKIPPED</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="all-our-tokens" tabindex="-1"><a class="header-anchor" href="#all-our-tokens" aria-hidden="true">#</a> All Our Tokens</h2><p>Lets examine all the needed Tokens definitions:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> Identifier <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-zA-Z]\\w*</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// We specify the &quot;longer_alt&quot; property to resolve keywords vs identifiers ambiguity.</span>
<span class="token comment">// See: https://github.com/chevrotain/chevrotain/blob/master/examples/lexer/keywords_vs_identifiers/keywords_vs_identifiers.js</span>
<span class="token keyword">const</span> Select <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Select&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">SELECT</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">longer_alt</span><span class="token operator">:</span> Identifier<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> From <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;From&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">FROM</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">longer_alt</span><span class="token operator">:</span> Identifier<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Where <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Where&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">WHERE</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">longer_alt</span><span class="token operator">:</span> Identifier<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Comma <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Comma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Integer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">0|[1-9]\\d*</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> GreaterThan <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;GreaterThan&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&gt;</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> LessThan <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;LessThan&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> WhiteSpace <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;WhiteSpace&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">group</span><span class="token operator">:</span> chevrotain<span class="token punctuation">.</span>Lexer<span class="token punctuation">.</span><span class="token constant">SKIPPED</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="creating-the-lexer" tabindex="-1"><a class="header-anchor" href="#creating-the-lexer" aria-hidden="true">#</a> Creating The Lexer</h2><p>We now have Token definitions, but how do we create a Lexer from these?</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// note we are placing WhiteSpace first as it is very common thus it will speed up the lexer.</span>
<span class="token keyword">let</span> allTokens <span class="token operator">=</span> <span class="token punctuation">[</span>
  WhiteSpace<span class="token punctuation">,</span>
  <span class="token comment">// &quot;keywords&quot; appear before the Identifier</span>
  Select<span class="token punctuation">,</span>
  From<span class="token punctuation">,</span>
  Where<span class="token punctuation">,</span>
  Comma<span class="token punctuation">,</span>
  <span class="token comment">// The Identifier must appear after the keywords because all keywords are valid identifiers.</span>
  Identifier<span class="token punctuation">,</span>
  Integer<span class="token punctuation">,</span>
  GreaterThan<span class="token punctuation">,</span>
  LessThan<span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> SelectLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Lexer</span><span class="token punctuation">(</span>allTokens<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that:</p>`,13)),s("ul",null,[s("li",null,[n[16]||(n[16]=s("p",null,[a("The "),s("strong",null,"order"),a(" of Token definitions passed to the Lexer is "),s("strong",null,"important"),a(". The first PATTERN to match will be chosen not the longest.")],-1)),s("ul",null,[s("li",null,[n[14]||(n[14]=a("See how to resolve ")),s("a",v,[n[13]||(n[13]=a("Keywords vs Identifiers")),e(t)]),n[15]||(n[15]=a("."))])])]),n[24]||(n[24]=s("li",null,[s("p",null,[a("The lexer's "),s("code",null,"Tokenize"),a(" method is a "),s("strong",null,"pure function"),a(", thus only a "),s("strong",null,"single Lexer"),a(" (per grammar) is needed.")])],-1)),s("li",null,[n[20]||(n[20]=s("p",null,[a("The lexer is "),s("strong",null,"context unaware"),a(", it lexes each token (pattern) individually.")],-1)),s("ul",null,[s("li",null,[n[18]||(n[18]=a("If you need to distinguish between different contexts during the lexing phase, take a look at ")),e(o,{to:"/features/lexer_modes.html"},{default:l(()=>n[17]||(n[17]=[a("Lexer Modes")])),_:1}),n[19]||(n[19]=a("."))])])]),s("li",null,[s("p",null,[n[22]||(n[22]=a("For more patterns requiring more complex constraints than a regular expression, take a look at ")),e(o,{to:"/features/custom_token_patterns.html"},{default:l(()=>n[21]||(n[21]=[a("Custom Token Patterns")])),_:1}),n[23]||(n[23]=a("."))])])]),n[35]||(n[35]=p(`<h2 id="using-the-lexer" tabindex="-1"><a class="header-anchor" href="#using-the-lexer" aria-hidden="true">#</a> Using The Lexer</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> inputText <span class="token operator">=</span> <span class="token string">&quot;SELECT column1 FROM table2&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lexingResult <span class="token operator">=</span> SelectLexer<span class="token punctuation">.</span><span class="token function">tokenize</span><span class="token punctuation">(</span>inputText<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The Lexing Result will contain:</p>`,3)),s("ol",null,[n[28]||(n[28]=s("li",null,"A Token Vector.",-1)),n[29]||(n[29]=s("li",null,"the lexing errors (if any were encountered)",-1)),s("li",null,[n[26]||(n[26]=a("And other ")),s("a",x,[n[25]||(n[25]=a("Token groups")),e(t)]),n[27]||(n[27]=a(" (if grouping was used)"))])])])}const f=i(k,[["render",b],["__file","step1_lexing.html.vue"]]);export{f as default};
