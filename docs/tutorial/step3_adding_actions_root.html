<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tutorial - Semantics | Chevrotain</title>
    <meta name="description" content="Parser Building Toolkit for JavaScript">
    
    
    <link rel="preload" href="/chevrotain/docs/assets/css/0.styles.57de94ca.css" as="style"><link rel="preload" href="/chevrotain/docs/assets/js/app.3c921ffe.js" as="script"><link rel="preload" href="/chevrotain/docs/assets/js/40.f3b2145c.js" as="script"><link rel="prefetch" href="/chevrotain/docs/assets/js/10.30254b29.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/11.e1bf6a36.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/12.9c15c8cb.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/13.0e66fd4f.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/14.f894ddad.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/15.059f34c6.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/16.d9c15d1c.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/17.7ced73b4.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/18.496ae7e2.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/19.73cf0c21.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/2.8480997d.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/20.ea243809.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/21.bd600ff4.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/22.f4e7a4a8.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/23.c5cb6a55.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/24.332640b8.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/25.89fdcbc5.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/26.4aca3b3f.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/27.6ff03240.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/28.6270fe1a.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/29.ada681b9.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/3.8cc3a9ee.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/30.dcc40cec.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/31.405c0010.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/32.d54ba2cb.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/33.e281ce57.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/34.459665bc.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/35.fea563c0.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/36.c4fa5b4f.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/37.a437e399.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/38.680cf2b5.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/39.ff6123a2.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/4.f418c87d.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/41.9ba663de.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/42.797debf8.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/43.e60ced34.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/44.84933f4c.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/5.4a1d2d14.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/6.b3782677.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/7.711b7e93.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/8.ba08e850.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/9.150a9d5b.js">
    <link rel="stylesheet" href="/chevrotain/docs/assets/css/0.styles.57de94ca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/chevrotain/docs/" class="home-link router-link-active"><!----> <span class="site-name">Chevrotain</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/chevrotain/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/chevrotain/docs/features/blazing_fast.html" class="nav-link">Features</a></div><div class="nav-item"><a href="/chevrotain/docs/tutorial/step0_introduction.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/chevrotain/docs/guide/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/chevrotain/docs/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/chevrotain/docs/changes/BREAKING_CHANGES.html" class="nav-link">Changes</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/documentation/4_4_0/globals.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  APIs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/playground/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Playground
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/performance/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Benchmark
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/chevrotain-parser/Lobby" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/SAP/chevrotain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/chevrotain/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/chevrotain/docs/features/blazing_fast.html" class="nav-link">Features</a></div><div class="nav-item"><a href="/chevrotain/docs/tutorial/step0_introduction.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/chevrotain/docs/guide/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/chevrotain/docs/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/chevrotain/docs/changes/BREAKING_CHANGES.html" class="nav-link">Changes</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/documentation/4_4_0/globals.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  APIs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/playground/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Playground
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/performance/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Benchmark
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/chevrotain-parser/Lobby" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/SAP/chevrotain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Tutorial</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/chevrotain/docs/tutorial/step0_introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/chevrotain/docs/tutorial/step1_lexing.html" class="sidebar-link">Lexer</a></li><li><a href="/chevrotain/docs/tutorial/step2_parsing.html" class="sidebar-link">Parser</a></li><li><a href="/chevrotain/docs/tutorial/step3_adding_actions_root.html" class="active sidebar-link">Semantics</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chevrotain/docs/tutorial/step3_adding_actions_root.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/tutorial/step3_adding_actions_root.html#alternatives" class="sidebar-link">Alternatives</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/tutorial/step3_adding_actions_root.html#summary" class="sidebar-link">Summary</a></li></ul></li><li><a href="/chevrotain/docs/tutorial/step3a_adding_actions_visitor.html" class="sidebar-link">Semantics - CST Visitor</a></li><li><a href="/chevrotain/docs/tutorial/step3b_adding_actions_embedded.html" class="sidebar-link">Semantics - Embedded</a></li><li><a href="/chevrotain/docs/tutorial/step4_fault_tolerance.html" class="sidebar-link">Fault Tolerance</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="tutorial-semantics"><a href="#tutorial-semantics" aria-hidden="true" class="header-anchor">#</a> Tutorial - Semantics</h1> <h2 id="introduction"><a href="#introduction" aria-hidden="true" class="header-anchor">#</a> Introduction</h2> <p>In the <a href="/chevrotain/docs/tutorial/step2_parsing.html">previous</a> tutorial step
we have implemented a parser for a &quot;mini&quot; SQL Select grammar. The current problem is that our parser only
validates that the input conforms to the grammar. In most real world use cases the parser will also have to output some
result or data structure.</p> <p>We refer to the logic that computes that result or builds that data structure as the <strong>Grammar Semantics</strong>.</p> <h2 id="alternatives"><a href="#alternatives" aria-hidden="true" class="header-anchor">#</a> Alternatives</h2> <p>Chevrotain supports two <strong>very different</strong> solutions to this problem:</p> <ul><li><p><strong>Separation</strong> of grammar(syntax) and user actions (semantics) using a <strong>CST Visitor</strong>.</p> <ul><li><a href="https://github.com/SAP/chevrotain/blob/master/examples/grammars/calculator/calculator_pure_grammar.js" target="_blank" rel="noopener noreferrer">Example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><p><strong>Embedding</strong> user actions (semantics) inside the grammar rules.</p> <ul><li><a href="https://github.com/SAP/chevrotain/blob/master/examples/grammars/calculator/calculator_embedded_actions.js" target="_blank" rel="noopener noreferrer">Example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul> <p>Before we continue one of the two approaches must be chosen.</p> <p>The main difference between the two approaches is in regards to the question:
<strong>Where are the semantics (user actions) implemented?</strong></p> <p>When using a CST Visitor the semantics are <strong>completely separated</strong> from the grammar
They could even be implemented in a <strong>different</strong> file. This has great benefits
for the parser's ease of <strong>maintenance</strong> and its <strong>re-usability</strong>.
Thus using a CST Visitor is the <strong>recommended approach</strong>.</p> <p>That is not to say there are no use cases in which <strong>embedded actions</strong> are better.
The main advantage of embedded actions is their <strong>performance</strong>. Embedded actions are
about 50% faster than using a CST Visitor. This may sound like an unbeatable advantage
but that is not the case:</p> <ul><li><p>Chevrotain is <a href="https://sap.github.io/chevrotain/performance/" target="_blank" rel="noopener noreferrer">so fast<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that even with that performance penalty
it would beat other parsing solutions.</p> <ul><li>Tested on Modern V8</li></ul></li> <li><p>The Parsing step is normally just one step of a larger flow, a large performance penalty in one step
does not equate to a large performance penalty in the whole flow...</p></li></ul> <h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <ul><li>It is recommended to use a CST Visitor to separate the semantics(actions) from the syntax(grammar).</li> <li>Prefer embedding the semantics (actions) in the grammar only in use cases where performance is of utmost concern.</li></ul> <h4 id="what-is-next"><a href="#what-is-next" aria-hidden="true" class="header-anchor">#</a> What is Next?</h4> <p>Choose the Semantic actions Model you prefer:</p> <ol><li>Next step in the tutorial: <a href="/chevrotain/docs/tutorial/step3a_adding_actions_visitor.html">Semantics - CST Visitor</a>.</li> <li>Next step in the tutorial: <a href="/chevrotain/docs/tutorial/step3b_adding_actions_embedded.html">Semantics - Embedded Actions</a>.</li></ol></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/SAP/chevrotain/edit/master/docs/tutorial/step3_adding_actions_root.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/chevrotain/docs/tutorial/step2_parsing.html" class="prev">
          Parser
        </a></span> <span class="next"><a href="/chevrotain/docs/tutorial/step3a_adding_actions_visitor.html">
          Semantics - CST Visitor
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/chevrotain/docs/assets/js/app.3c921ffe.js" defer></script><script src="/chevrotain/docs/assets/js/40.f3b2145c.js" defer></script>
  </body>
</html>
