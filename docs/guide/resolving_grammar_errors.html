<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Resolving Grammar Errors | Chevrotain</title>
    <meta name="description" content="Parser Building Toolkit for JavaScript">
    
    
    <link rel="preload" href="/chevrotain/docs/assets/css/0.styles.a96c3778.css" as="style"><link rel="preload" href="/chevrotain/docs/assets/js/app.f4d1fc03.js" as="script"><link rel="preload" href="/chevrotain/docs/assets/js/34.bb3725ae.js" as="script"><link rel="prefetch" href="/chevrotain/docs/assets/js/10.cf625237.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/11.40d0be53.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/12.b97367c1.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/13.6d708524.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/14.2a130ac7.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/15.79cbc5f8.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/16.f5153e30.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/17.9a02eb0f.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/18.b00b3535.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/19.ca9534f5.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/2.e6b85e1a.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/20.d336854a.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/21.1bb1be00.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/22.96a50323.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/23.5b3cbbe8.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/24.b9b54479.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/25.7731f527.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/26.12ee6537.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/27.4073e213.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/28.ed2f1e80.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/29.3d86f83e.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/3.e0874ba7.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/30.2e9847c1.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/31.3f65aa4c.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/32.9fa8ff77.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/33.0967feba.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/35.dadbe983.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/36.fda44973.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/37.1fdeea17.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/38.b03b5d4c.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/39.547ffae7.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/4.994ac2b9.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/40.25846a28.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/41.871aac99.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/42.1b1eb5cd.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/43.6bec0dde.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/44.5e1d7cf4.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/5.e663830f.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/6.a8d7a373.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/7.f4925a73.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/8.b6a09a52.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/9.962db913.js">
    <link rel="stylesheet" href="/chevrotain/docs/assets/css/0.styles.a96c3778.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/chevrotain/docs/" class="home-link router-link-active"><!----> <span class="site-name">Chevrotain</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/chevrotain/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/chevrotain/docs/features/blazing_fast.html" class="nav-link">Features</a></div><div class="nav-item"><a href="/chevrotain/docs/tutorial/step0_introduction.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/chevrotain/docs/guide/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/chevrotain/docs/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/chevrotain/docs/changes/BREAKING_CHANGES.html" class="nav-link">Changes</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/documentation/4_3_0/globals.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  APIs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/playground/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Playground
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/performance/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Benchmark
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/chevrotain-parser/Lobby" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/SAP/chevrotain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/chevrotain/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/chevrotain/docs/features/blazing_fast.html" class="nav-link">Features</a></div><div class="nav-item"><a href="/chevrotain/docs/tutorial/step0_introduction.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/chevrotain/docs/guide/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/chevrotain/docs/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/chevrotain/docs/changes/BREAKING_CHANGES.html" class="nav-link">Changes</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/documentation/4_3_0/globals.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  APIs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/playground/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Playground
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/performance/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Benchmark
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://gitter.im/chevrotain-parser/Lobby" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/SAP/chevrotain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/chevrotain/docs/guide/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/chevrotain/docs/guide/performance.html" class="sidebar-link">Performance</a></li><li><a href="/chevrotain/docs/guide/concrete_syntax_tree.html" class="sidebar-link">CST</a></li><li><a href="/chevrotain/docs/guide/generating_syntax_diagrams.html" class="sidebar-link">Syntax Diagrams</a></li><li><a href="/chevrotain/docs/guide/custom_token_patterns.html" class="sidebar-link">Custom Token Patterns</a></li><li><a href="/chevrotain/docs/guide/syntactic_content_assist.html" class="sidebar-link">Syntactic Content Assist</a></li><li><a href="/chevrotain/docs/guide/custom_apis.html" class="sidebar-link">Custom APIs</a></li><li><a href="/chevrotain/docs/guide/resolving_grammar_errors.html" class="active sidebar-link">Resolving Grammar Errors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX" class="sidebar-link">Common Prefix Ambiguities</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_grammar_errors.html#TERMINAL_NAME_NOT_FOUND" class="sidebar-link">Terminal Token Name Not Found</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_grammar_errors.html#INFINITE_LOOP" class="sidebar-link">Infinite Loop Detected</a></li></ul></li><li><a href="/chevrotain/docs/guide/resolving_lexer_errors.html" class="sidebar-link">Resolving Lexer Errors</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="resolving-grammar-errors"><a href="#resolving-grammar-errors" aria-hidden="true" class="header-anchor">#</a> Resolving Grammar Errors</h1> <ul><li><a href="#COMMON_PREFIX">Common Prefix Ambiguities.</a></li> <li><a href="#TERMINAL_NAME_NOT_FOUND">Terminal Token Name Not Found.</a></li> <li><a href="#INFINITE_LOOP">Infinite Loop Detected.</a></li></ul> <h2 id="COMMON_PREFIX"><a href="#COMMON_PREFIX" aria-hidden="true" class="header-anchor">#</a> Common Prefix Ambiguities</h2> <p>Imagine the following grammar:</p> <div class="language-antlr extra-class"><pre class="language-text"><code>myRule:
  &quot;A&quot; &quot;B&quot; |
  &quot;A&quot; &quot;B&quot; &quot;C&quot;
</code></pre></div><p>The first alternative is a prefix of the second alternative.
Now lets consider the input [&quot;A&quot;, &quot;B&quot;].
For this input the first alternative would be matched as expected.</p> <p>However for the input [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;] the first
alternative would still be matched but this time <strong>incorrectly</strong>
as alternation matches are attempted <strong>in order</strong>.</p> <p>There are two ways to resolve this:</p> <ul><li><p>Reorder the alternatives so that shorter common prefix lookahead
paths appears after the longer ones.</p> <div class="language-antlr extra-class"><pre class="language-text"><code>myRule:
  &quot;A&quot; &quot;B&quot; &quot;C&quot; |
  &quot;A&quot; &quot;B&quot;
</code></pre></div></li> <li><p>Refactor the grammar to extract common prefixes.</p> <div class="language-antlr extra-class"><pre class="language-text"><code>  myRule:
    &quot;A&quot; &quot;B&quot; (&quot;C&quot;)?
</code></pre></div></li></ul> <h2 id="TERMINAL_NAME_NOT_FOUND"><a href="#TERMINAL_NAME_NOT_FOUND" aria-hidden="true" class="header-anchor">#</a> Terminal Token Name Not Found</h2> <p>This error occurs when Chevrotain cannot find a TokenType used in a CONSUME call.
Note that Chevrotain identifies the TokenType <strong>literally</strong> that is to say
Chevrotain <strong>reads</strong> the parser's source code (static analysis) not the value at runtime.</p> <p>Keeping this property in mind lets look at a few common causes of such an error
This parser</p> <ul><li><p>The TokenType's name does not match its literal form.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createToken<span class="token punctuation">,</span> Parser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;chevrotain&quot;</span>

<span class="token comment">// note the name property &quot;copyPastaMistake&quot; is different that the variable name &quot;Integer&quot;</span>
<span class="token keyword">const</span> Integer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;copyPastaMistake&quot;</span><span class="token punctuation">,</span> pattern<span class="token punctuation">:</span> <span class="token regex">/\d+/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> allTokens <span class="token operator">=</span> <span class="token punctuation">[</span>Integer<span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">MyParser</span> <span class="token keyword">extends</span> <span class="token class-name">Parser</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> allTokens<span class="token punctuation">,</span> config<span class="token punctuation">)</span>

        $<span class="token punctuation">.</span><span class="token constant">RULE</span><span class="token punctuation">(</span><span class="token string">&quot;MyRule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// Will cause &quot;Terminal Token Name Not Found&quot;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">CONSUME</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>The TokenType's was not provided to the parser in the tokenDictionary argument.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createToken<span class="token punctuation">,</span> Parser <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;chevrotain&quot;</span>

<span class="token keyword">const</span> Integer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span> pattern<span class="token punctuation">:</span> <span class="token regex">/\d+/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Opps we forgot to add the Integer Token to the TokenDictionary</span>
<span class="token keyword">const</span> allTokens <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">class</span> <span class="token class-name">MyParser</span> <span class="token keyword">extends</span> <span class="token class-name">Parser</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> allTokens<span class="token punctuation">,</span> config<span class="token punctuation">)</span>

        $<span class="token punctuation">.</span><span class="token constant">RULE</span><span class="token punctuation">(</span><span class="token string">&quot;MyRule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// Will cause &quot;Terminal Token Name Not Found&quot;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">CONSUME</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>This error may also occur due to source code transformations of the parser.
See: <a href="https://sap.github.io/chevrotain/docs/FAQ.html#MINIFIED" target="_blank" rel="noopener noreferrer">Minification<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
and <a href="https://sap.github.io/chevrotain/docs/FAQ.html#WEBPACK" target="_blank" rel="noopener noreferrer">Webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> FAQ sections.</p> <p>Basically if a code snippet such as:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> Integer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span> pattern<span class="token punctuation">:</span> <span class="token regex">/\d+/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">CONSUME</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
</code></pre></div><p>gets transformed to something like</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> v14 <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span> pattern<span class="token punctuation">:</span> <span class="token regex">/\d+/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">CONSUME</span><span class="token punctuation">(</span>v14<span class="token punctuation">)</span>
</code></pre></div><p>Then the literal form no longer matches the name property...</p></li></ul> <h2 id="INFINITE_LOOP"><a href="#INFINITE_LOOP" aria-hidden="true" class="header-anchor">#</a> Infinite Loop Detected</h2> <p>A repetition must consume at least one token in each iteration.
Entering an iteration while failing to do so would cause an <strong>infinite loop</strong> because
the condition to entering the next iteration would still be true while the parser state has
not been changed. essentially this creates a flow that looks like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// iteration lookahead condition (always true)</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// single iteration grammar</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Lets look at a few real examples that can cause this error</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token constant">MANY</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>
    <span class="token comment">// unreachable code</span>
    $<span class="token punctuation">.</span><span class="token constant">CONSUME</span><span class="token punctuation">(</span>Plus<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>By returning early in the iteration grammar we prevent the parser from consuming
The plus token and thus the next time the parser checks if it should enter the iteration
The condition (nextToken === Plus) would still be true.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token constant">MANY</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Never wrap Chevrotain grammar in JavaScript control flow constructs.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $<span class="token punctuation">.</span><span class="token constant">CONSUME</span><span class="token punctuation">(</span>Plus<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>This is similar to the previous example as if the condition is false, once
again the parser will consume nothing in the iteration.
Modeling conditional grammar paths must be done using Chevrotain grammar constructs
such as OPTION and/or <a href="https://sap.github.io/chevrotain/docs/features/gates.html" target="_blank" rel="noopener noreferrer">GATE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>For example the above example should be written as:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token constant">MANY</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token constant">OPTION</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      $<span class="token punctuation">.</span><span class="token constant">CONSUME</span><span class="token punctuation">(</span>Plus<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/SAP/chevrotain/edit/master/docs/guide/resolving_grammar_errors.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/chevrotain/docs/guide/custom_apis.html" class="prev">
          Custom APIs
        </a></span> <span class="next"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html">
          Resolving Lexer Errors
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/chevrotain/docs/assets/js/app.f4d1fc03.js" defer></script><script src="/chevrotain/docs/assets/js/34.bb3725ae.js" defer></script>
  </body>
</html>
