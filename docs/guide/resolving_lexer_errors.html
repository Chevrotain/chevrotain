<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chevrotain | Resolving Lexer Errors</title>
    <meta name="description" content="Parser Building Toolkit for JavaScript">
    
    
    <link rel="preload" href="/chevrotain/docs/assets/css/19.styles.089e34ac.css" as="style"><link rel="preload" href="/chevrotain/docs/assets/js/app.3b939427.js" as="script"><link rel="preload" href="/chevrotain/docs/assets/js/8.b6b23897.js" as="script"><link rel="prefetch" href="/chevrotain/docs/assets/js/10.7dcc95bd.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/1.4eb2070d.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/2.277b9b0f.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/3.febcbd74.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/4.e7cb2d2a.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/5.cc9d07f9.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/6.cae6adca.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/7.ffad7f30.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/9.9e1cc972.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/0.18acf1c4.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/11.4d506567.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/12.6272c2ef.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/13.9927fa96.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/14.3ef00f0b.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/15.3250d642.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/16.4f2b02bf.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/17.f41f3037.js"><link rel="prefetch" href="/chevrotain/docs/assets/js/18.8e01235c.js">
    <link rel="stylesheet" href="/chevrotain/docs/assets/css/19.styles.089e34ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/chevrotain/docs/" class="home-link router-link-active"><!----><span class="site-name">
      Chevrotain
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/chevrotain/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/chevrotain/docs/tutorial/step0_introduction.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/chevrotain/docs/guide/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/chevrotain/docs/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/chevrotain/docs/changes/BREAKING_CHANGES.html" class="nav-link">Changes</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/playground/" target="_blank" rel="noopener noreferrer" class="nav-link">Playground</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/performance/" target="_blank" rel="noopener noreferrer" class="nav-link">Benchmark</a></div><a href="https://github.com/SAP/chevrotain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/chevrotain/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/chevrotain/docs/tutorial/step0_introduction.html" class="nav-link">Tutorial</a></div><div class="nav-item"><a href="/chevrotain/docs/guide/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/chevrotain/docs/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/chevrotain/docs/changes/BREAKING_CHANGES.html" class="nav-link">Changes</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/playground/" target="_blank" rel="noopener noreferrer" class="nav-link">Playground</a></div><div class="nav-item"><a href="https://sap.github.io/chevrotain/performance/" target="_blank" rel="noopener noreferrer" class="nav-link">Benchmark</a></div><a href="https://github.com/SAP/chevrotain" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Guide</span><!----></p><ul class="sidebar-group-items"><li><a href="/chevrotain/docs/guide/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/chevrotain/docs/guide/concrete_syntax_tree.html" class="sidebar-link">CST</a></li><li><a href="/chevrotain/docs/guide/generating_syntax_diagrams.html" class="sidebar-link">Syntax Diagrams</a></li><li><a href="/chevrotain/docs/guide/custom_token_patterns.html" class="sidebar-link">Custom Token Patterns</a></li><li><a href="/chevrotain/docs/guide/syntactic_content_assist.html" class="sidebar-link">Syntactic Content Assist</a></li><li><a href="/chevrotain/docs/guide/custom_apis.html" class="sidebar-link">Custom APIs</a></li><li><a href="/chevrotain/docs/guide/resolving_grammar_errors.html" class="sidebar-link">Resolving Grammar Errors</a></li><li><a href="/chevrotain/docs/guide/resolving_lexer_errors.html" class="active sidebar-link">Resolving Lexer Errors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS" class="sidebar-link">No LINE_BREAKS Error</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS" class="sidebar-link">Unexpected RegExp Anchor Error</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE" class="sidebar-link">Token can never be matched</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT" class="sidebar-link">Complement Sets cannot be automatically optimized</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING" class="sidebar-link">Failed parsing &lt; /.../ &gt; Using the regexp-to-ast library</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE" class="sidebar-link">The regexp unicode flag is not currently supported by the regexp-to-ast library</a></li><li class="sidebar-sub-header"><a href="/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE" class="sidebar-link">TokenType &lt;...&gt; is using a custom token pattern without providing &lt;char_start_hint&gt; parameter</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="resolving-lexer-errors"><a href="#resolving-lexer-errors" aria-hidden="true" class="header-anchor">#</a> Resolving Lexer Errors</h1><ul><li><a href="#LINE_BREAKS">No LINE_BREAKS Error.</a></li><li><a href="#ANCHORS">Unexpected RegExp Anchor Error.</a></li><li><a href="#UNREACHABLE">Token Can Never Be Matched.</a></li><li><a href="#COMPLEMENT">Complement Sets cannot be automatically optimized.</a></li><li><a href="#REGEXP_PARSING">Failed parsing &lt; /.../ &gt; Using the regexp-to-ast library.</a></li><li><a href="#UNICODE_OPTIMIZE">The regexp unicode flag is not currently supported by the regexp-to-ast library.</a></li><li><a href="#CUSTOM_OPTIMIZE">TokenType &lt;...&gt; is using a custom token pattern without providing &lt;char_start_hint&gt; parameter</a></li></ul><h2 id="LINE_BREAKS"><a href="#LINE_BREAKS" aria-hidden="true" class="header-anchor">#</a> No LINE_BREAKS Error</h2><p>A Chevrotain Lexer will by default track the full position information for each token.
This includes line and column information.</p><p>In order to support this the Lexer must be aware of which Tokens may include line terminators.
This information must be provided by the lexer's author.</p><p>This error means that the Lexer has been defined to track line and column information (perhaps by default).
Yet not a single one of the Token definitions passed to it was defined as possibly containing line terminators.</p><p>To resolve this choose one of the following:</p><ol><li><p>Disable the line and column position tracking using the <a href="https://sap.github.io/chevrotain/documentation/3_2_0/interfaces/ilexerconfig.html#positiontracking" target="_blank" rel="noopener noreferrer">positionTracking</a> configuration option.</p><pre class="language-javascript"><code><span class="token keyword">const</span> myTokens <span class="token operator">=</span> <span class="token punctuation">[</span>IntegerLiteral<span class="token punctuation">,</span> StringLiteral<span class="token punctuation">,</span> WhiteSpace <span class="token comment">/*, ... */</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>myTokens<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    positionTracking<span class="token punctuation">:</span> <span class="token string">&quot;onlyOffset&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></li><li><p>Mark the Tokens which may include a line terminator with a line_breaks flag.</p><pre class="language-javascript"><code><span class="token keyword">const</span> createToken <span class="token operator">=</span> chevrotain<span class="token punctuation">.</span>createToken

<span class="token comment">// Using createToken API</span>
<span class="token keyword">const</span> Whitespace <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Whitespace&quot;</span><span class="token punctuation">,</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/\s+/</span><span class="token punctuation">,</span>
    line_breaks<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// or in ES2015 syntax with static properties</span>
<span class="token keyword">class</span> <span class="token class-name">Whitespace</span> <span class="token keyword">extends</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Token</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Whitespace<span class="token punctuation">.</span><span class="token constant">PATTERN</span> <span class="token operator">=</span> <span class="token regex">/\s+/</span>
Whitespace<span class="token punctuation">.</span><span class="token constant">LINE_BREAKS</span> <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token keyword">const</span> myTokens <span class="token operator">=</span> <span class="token punctuation">[</span>IntegerLiteral<span class="token punctuation">,</span> StringLiteral<span class="token punctuation">,</span> WhiteSpace <span class="token comment">/*, ... */</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>myTokens<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><ul><li><p>Note that the definition of what constitutes a line terminator is controlled by the
<a href="https://sap.github.io/chevrotain/documentation/3_2_0/interfaces/ilexerconfig.html#lineTerminatorsPattern" target="_blank" rel="noopener noreferrer">lineTerminatorsPattern</a> lexer configuration property.</p></li><li><p>Also note that multi-line tokens such as some types of comments and string literals tokens may contain
line terminators, if your language includes such tokens they must also be marked with the line_breaks flag.</p></li></ul></li></ol><h2 id="ANCHORS"><a href="#ANCHORS" aria-hidden="true" class="header-anchor">#</a> Unexpected RegExp Anchor Error</h2><p>A Token RegExp pattern used in a chevrotain lexer may not use the start/end of input anchors ('$' and '^').</p><pre class="language-javascript"><code><span class="token keyword">const</span> createToken <span class="token operator">=</span> chevrotain<span class="token punctuation">.</span>createToken

<span class="token comment">// Using createToken API</span>
<span class="token keyword">const</span> Whitespace <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// invalid pattern using both anchors</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/^\d+$/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>This will be checked for during the initialization of the lexer.
Unfortunately, this validation can detect false positives when the anchor characters
are used in certain regExp contexts, for example:</p><pre class="language-javascript"><code><span class="token keyword">const</span> createToken <span class="token operator">=</span> chevrotain<span class="token punctuation">.</span>createToken

<span class="token keyword">const</span> semVer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;semVer&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// will match semantic versions such as: &quot;1.0.2&quot;, &quot;^0.3.9&quot;</span>
    <span class="token comment">// inside a character set ([...]) the carat ('^') character does not act as an anchor.</span>
    <span class="token comment">// yet it would still cause the validation to fail.</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/[~^]?\d+\.\d+\.\d+/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// will throw an error</span>
<span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>semVer<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><p>It is possible to workaround this problem by simply <strong>escaping</strong> the the offending carat or dollar sign.</p><pre class="language-javascript"><code><span class="token keyword">const</span> semVer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;semVer&quot;</span><span class="token punctuation">,</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/[~\^]?\d+\.\d+\.\d+/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="UNREACHABLE"><a href="#UNREACHABLE" aria-hidden="true" class="header-anchor">#</a> Token can never be matched</h2><p>This error means that A Token type can never be successfully matched as
a <strong>previous</strong> Token type in the lexer definition will <strong>always</strong> matched instead.
This happens because the default behavior of Chevrotain is to attempt to match
tokens <strong>by the order</strong> described in the lexer definition.</p><p>For example:</p><pre class="language-javascript"><code><span class="token keyword">const</span> ForKeyword <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;ForKeyword&quot;</span><span class="token punctuation">,</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/for/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> Identifier <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/[a-zA-z]+/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Will throw Token &lt;ForKeyword&gt; can never be matched...</span>
<span class="token comment">// Because the input &quot;for&quot; is also a valid identifier</span>
<span class="token comment">// and matching an identifier will be attempted first.</span>
<span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Identifier<span class="token punctuation">,</span> ForKeyword<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><ul><li>Note that this validation is limited to simple patterns such as keywords
The more general case of any pattern being a strict subset of a preceding pattern
will require much more in depth RegExp analysis capabilities.</li></ul><p>To resolve this simply re-arrange the order of Token types in the lexer
definition such that the more specific Token types will be listed first.</p><pre class="language-javascript"><code><span class="token comment">// Identifier is now listed as the last Token type.</span>
<span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ForKeyword<span class="token punctuation">,</span> Identifier<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><p>Note that the solution provided above will create a new problem.
Any identifier <strong>starting with</strong> &quot;for&quot; will be lexed as <strong>two separate</strong> tokens,
a ForKeyword and an identifier. For example:</p><pre class="language-javascript"><code><span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ForKeyword<span class="token punctuation">,</span> Identifier<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// [</span>
<span class="token comment">//    {image:&quot;for&quot;}</span>
<span class="token comment">//    {image:&quot;ward&quot;}</span>
<span class="token comment">// ]</span>
<span class="token keyword">const</span> tokensResult <span class="token operator">=</span> myLexer<span class="token punctuation">.</span><span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token string">&quot;forward&quot;</span><span class="token punctuation">)</span>
</code></pre><p>To resolve this second problem see how to prefer the <strong>longest match</strong>
as demonstrated in the <a href="https://github.com/SAP/Chevrotain/blob/master/examples/lexer/keywords_vs_identifiers/keywords_vs_identifiers.js" target="_blank" rel="noopener noreferrer">keywords vs identifiers example</a></p><h2 id="COMPLEMENT"><a href="#COMPLEMENT" aria-hidden="true" class="header-anchor">#</a> Complement Sets cannot be automatically optimized</h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matchs
using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> to be consumed.
To apply this optimization the first possible charCodes for <strong>every</strong> TokenType must be identified.</p><p>When a TokenType pattern uses a regExp complement Set as a potential <strong>first</strong> character
the optimization is skipped as translating a complement set to a regular set requires too many cpu cycles
during the Lexer's initialization.</p><p>For example an XML Text is defined by <strong>everything</strong> except a closing tag.</p><pre class="language-javascript"><code><span class="token keyword">const</span> XMLText <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;XMLText&quot;</span><span class="token punctuation">,</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/[^&lt;&amp;]+/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>This means that there are <strong>65533</strong> (65535 - 2) possible starting charCodes
For an XMLText token.</p><p>If the use of these optimizations is desired and the startup resources cost is acceptable
It is possilbe to enable the optimizations by explicitly providing a &quot;<a href="https://sap.github.io/chevrotain/documentation/3_2_0/interfaces/itokenconfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property.
e.g:</p><pre class="language-javascript"><code><span class="token keyword">const</span> hints <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">65535</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 38 is '&lt;' and 60 is '&amp;'</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!==</span> <span class="token number">38</span> <span class="token operator">||</span> i <span class="token operator">!==</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hints<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> XMLText <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;XMLText&quot;</span><span class="token punctuation">,</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/[^&lt;&amp;]+/</span><span class="token punctuation">,</span>
    start_chars_hint<span class="token punctuation">:</span> hints
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>Please Note that filling such an array <a href="https://jsperf.com/fill-16-bits" target="_blank" rel="noopener noreferrer">can take over 1ms</a> on a modern machine.
So if you are only parsing small inputs and/or starting a new process for each
parser invocation the added initilization cost may be counter productive.</p><h2 id="REGEXP_PARSING"><a href="#REGEXP_PARSING" aria-hidden="true" class="header-anchor">#</a> Failed parsing &lt; /.../ &gt; Using the regexp-to-ast library</h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matchs
using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> to be consumed.
To apply this optimization the first possible charCodes for <strong>every</strong> TokenType must be identified.</p><p>This analysis is implemented using the <a href="https://github.com/bd82/regexp-to-ast" target="_blank" rel="noopener noreferrer">regexp-to-ast</a> library.
This error usally indicates a bug in the regexp-to-ast library.
The impact is that the optimization described above would become disabled.
Lexing and Parsing will still work correctly, only slower...</p><p>Please open a bug for the <a href="https://github.com/bd82/regexp-to-ast" target="_blank" rel="noopener noreferrer">regexp-to-ast</a> library.
This issue can be <strong>worked around</strong> by explicitly providing a &quot;<a href="https://sap.github.io/chevrotain/documentation/3_2_0/interfaces/itokenconfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property.</p><pre class="language-javascript"><code><span class="token keyword">const</span> Integer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// lets assume that this pattern caused an error in regexp-to-ast</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/[1-9]\d*/</span><span class="token punctuation">,</span>
    <span class="token comment">// by explicitly providing the first possible characters of this pattern</span>
    <span class="token comment">// the analysis by the regexp-to-ast library will be skipped</span>
    <span class="token comment">// and the optimization can be enabled.</span>
    start_chars_hint<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="UNICODE_OPTIMIZE"><a href="#UNICODE_OPTIMIZE" aria-hidden="true" class="header-anchor">#</a> The regexp unicode flag is not currently supported by the regexp-to-ast library</h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matchs
using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> to be consumed.
To apply this optimization the first possible charCodes for <strong>every</strong> TokenType must be identified.</p><p>This analysis is implemented using the <a href="https://github.com/bd82/regexp-to-ast" target="_blank" rel="noopener noreferrer">regexp-to-ast</a> library.
This library currently does not support the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode" target="_blank" rel="noopener noreferrer">unicode regexp flag</a>
The impact is that the optimization described above would become disabled.
Lexing and Parsing will still work correctly, just slower...</p><p>This issue can be <strong>worked around</strong> by explicitly providing a &quot;<a href="https://sap.github.io/chevrotain/documentation/3_2_0/interfaces/itokenconfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property.</p><pre class="language-javascript"><code><span class="token comment">// 'üí©' character</span>
<span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;PileOfPoo&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// \u{xxxxx} 32bit unicode escape can only be used with the /u flag enabled.</span>
    pattern<span class="token punctuation">:</span> <span class="token regex">/\u{1F4A9}/u</span><span class="token punctuation">,</span>
    <span class="token comment">// The 'üí©' character is represented by surrogate pairs: '\uD83D\uDCA9'</span>
    <span class="token comment">// the start_chars_hint should only be provided the first of the pair.</span>
    start_chars_hint<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">55357</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>Another way to <strong>work around</strong> the issue is to define the pattern as a string literal.
As that kind can be trivially optimized.
This is naturally only relevant for simple patterns.
For example:</p><pre class="language-javascript"><code><span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;LCurley&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// note that the pattern is a string literal, not a regExp literal.</span>
    pattern<span class="token punctuation">:</span> <span class="token string">&quot;{&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="CUSTOM_OPTIMIZE"><a href="#CUSTOM_OPTIMIZE" aria-hidden="true" class="header-anchor">#</a> TokenType &lt;...&gt; is using a custom token pattern without providing &lt;char_start_hint&gt; parameter</h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matchs
using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> to be consumed.
To apply this optimization the first possible charCodes for <strong>every</strong> TokenType must be identified.</p><p>This information cannot be automatically computed for <a href="https://sap.github.io/chevrotain/docs/guide/custom_token_patterns.html" target="_blank" rel="noopener noreferrer">custom token patterns</a>
and <strong>should</strong> therefore be explicitly provided using the &quot;<a href="https://sap.github.io/chevrotain/documentation/3_2_0/interfaces/itokenconfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property.</p><p>For example:</p><pre class="language-javascript"><code><span class="token keyword">const</span> IntegerToken <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;IntegerToken&quot;</span><span class="token punctuation">,</span>
    pattern<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        exec<span class="token punctuation">:</span> <span class="token punctuation">(</span>text<span class="token punctuation">,</span> offset<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">/* ... */</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    start_chars_hint<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><p>Providing the &quot;<a href="https://sap.github.io/chevrotain/documentation/3_2_0/interfaces/itokenconfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property is <strong>not</strong> mandatory.
It will only enable performance optimizations in the lexer.</p></div><div class="content edit-link"><a href="https://github.com/SAP/chevrotain/edit/master/docs/guide/resolving_lexer_errors.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ‚Üê <a href="/chevrotain/docs/guide/resolving_grammar_errors.html" class="prev">
          Resolving Grammar Errors
        </a></span><!----></p></div></div></div></div>
    <script src="/chevrotain/docs/assets/js/8.b6b23897.js" defer></script><script src="/chevrotain/docs/assets/js/app.3b939427.js" defer></script>
  </body>
</html>
