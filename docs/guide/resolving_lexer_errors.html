<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Resolving Lexer Errors | Chevrotain</title><meta name="description" content="Parser Building Toolkit for JavaScript">
    <link rel="preload" href="/docs/assets/style-C_1sbLzA.css" as="style"><link rel="stylesheet" href="/docs/assets/style-C_1sbLzA.css">
    <link rel="modulepreload" href="/docs/assets/app-BBnv9iX2.js"><link rel="modulepreload" href="/docs/assets/resolving_lexer_errors.html-BjRf8YDO.js">
    <link rel="prefetch" href="/docs/assets/FAQ.html-DEAo9kJs.js" as="script"><link rel="prefetch" href="/docs/assets/index.html-BA__hqDM.js" as="script"><link rel="prefetch" href="/docs/assets/BREAKING_CHANGES.html-DVsFiugU.js" as="script"><link rel="prefetch" href="/docs/assets/CHANGELOG.html-D8elODT7.js" as="script"><link rel="prefetch" href="/docs/assets/concrete_syntax_tree.html-CLmqA1LA.js" as="script"><link rel="prefetch" href="/docs/assets/custom_token_patterns.html-C7x5dGfx.js" as="script"><link rel="prefetch" href="/docs/assets/generating_syntax_diagrams.html-B2kDC-Az.js" as="script"><link rel="prefetch" href="/docs/assets/initialization_performance.html-DUqIVGxd.js" as="script"><link rel="prefetch" href="/docs/assets/internals.html-DAqhW9A_.js" as="script"><link rel="prefetch" href="/docs/assets/introduction.html-BJRwpyoH.js" as="script"><link rel="prefetch" href="/docs/assets/performance.html-CLNj4k1u.js" as="script"><link rel="prefetch" href="/docs/assets/resolving_grammar_errors.html-e_fA6K1T.js" as="script"><link rel="prefetch" href="/docs/assets/syntactic_content_assist.html-Dp6PXJmf.js" as="script"><link rel="prefetch" href="/docs/assets/step0_introduction.html-EznX4l3A.js" as="script"><link rel="prefetch" href="/docs/assets/step1_lexing.html-B1EN0yUc.js" as="script"><link rel="prefetch" href="/docs/assets/step2_parsing.html-BLcyTXts.js" as="script"><link rel="prefetch" href="/docs/assets/step3_adding_actions_root.html-D37ieT1P.js" as="script"><link rel="prefetch" href="/docs/assets/step3a_adding_actions_visitor.html-Bkwyb3J3.js" as="script"><link rel="prefetch" href="/docs/assets/step3b_adding_actions_embedded.html-B2kJBmZh.js" as="script"><link rel="prefetch" href="/docs/assets/step4_fault_tolerance.html-BKY7Q8bj.js" as="script"><link rel="prefetch" href="/docs/assets/backtracking.html-CJ7EhSwe.js" as="script"><link rel="prefetch" href="/docs/assets/blazing_fast.html-CYQ_ZdfF.js" as="script"><link rel="prefetch" href="/docs/assets/custom_errors.html-DJTWeMMc.js" as="script"><link rel="prefetch" href="/docs/assets/custom_token_patterns.html-D7Uv4Z-h.js" as="script"><link rel="prefetch" href="/docs/assets/easy_debugging.html-CIt_5g87.js" as="script"><link rel="prefetch" href="/docs/assets/fault_tolerance.html-CQhAAZyD.js" as="script"><link rel="prefetch" href="/docs/assets/gates.html-BpvFtC-g.js" as="script"><link rel="prefetch" href="/docs/assets/grammar_inheritance.html-Cho95hYz.js" as="script"><link rel="prefetch" href="/docs/assets/lexer_modes.html-DfScufE7.js" as="script"><link rel="prefetch" href="/docs/assets/llk.html-CywPvz__.js" as="script"><link rel="prefetch" href="/docs/assets/multiple_start_rules.html-BwswJPAk.js" as="script"><link rel="prefetch" href="/docs/assets/parameterized_rules.html-Cjn9d98E.js" as="script"><link rel="prefetch" href="/docs/assets/position_tracking.html-DO8kc3ph.js" as="script"><link rel="prefetch" href="/docs/assets/regexp.html-Wi1VQl0x.js" as="script"><link rel="prefetch" href="/docs/assets/separation.html-DMvpi5Oi.js" as="script"><link rel="prefetch" href="/docs/assets/syntactic_content_assist.html-CpjzUIgo.js" as="script"><link rel="prefetch" href="/docs/assets/syntax_diagrams.html-BUhdTc3I.js" as="script"><link rel="prefetch" href="/docs/assets/token_alternative_matches.html-C-0DrAuJ.js" as="script"><link rel="prefetch" href="/docs/assets/token_categories.html-iaI2wajg.js" as="script"><link rel="prefetch" href="/docs/assets/token_grouping.html-BMqwyr8Z.js" as="script"><link rel="prefetch" href="/docs/assets/token_skipping.html-CaOFK7TQ.js" as="script"><link rel="prefetch" href="/docs/assets/404.html-IP70TRoO.js" as="script"><link rel="prefetch" href="/docs/assets/index-BuqEEp8M.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/docs/"><!----><span class="vp-site-name" aria-hidden="true">Chevrotain</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/features/blazing_fast.html" aria-label="Features"><!--[--><!--[--><!--]--><!--]-->Features<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/tutorial/step0_introduction.html" aria-label="Tutorial"><!--[--><!--[--><!--]--><!--]-->Tutorial<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/guide/introduction.html" aria-label="Guide"><!--[--><!--[--><!--]--><!--]-->Guide<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/FAQ.html" aria-label="FAQ"><!--[--><!--[--><!--]--><!--]-->FAQ<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/changes/BREAKING_CHANGES.html" aria-label="Changes"><!--[--><!--[--><!--]--><!--]-->Changes<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://chevrotain.io/documentation/11_1_2/modules.html" aria-label="APIs" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->APIs<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://chevrotain.io/playground/" aria-label="Playground" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Playground<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://chevrotain.io/performance/" aria-label="Benchmark" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Benchmark<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/Chevrotain/chevrotain/discussions" aria-label="Discussions" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discussions<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/chevrotain/chevrotain" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div class="docsearch-placeholder"><button type="button" aria-label="Search" aria-keyshortcuts="Control+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" class="DocSearch-Search-Icon"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key DocSearch-Button-Key--ctrl">Ctrl</kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/features/blazing_fast.html" aria-label="Features"><!--[--><!--[--><!--]--><!--]-->Features<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/tutorial/step0_introduction.html" aria-label="Tutorial"><!--[--><!--[--><!--]--><!--]-->Tutorial<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/guide/introduction.html" aria-label="Guide"><!--[--><!--[--><!--]--><!--]-->Guide<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/FAQ.html" aria-label="FAQ"><!--[--><!--[--><!--]--><!--]-->FAQ<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/docs/changes/BREAKING_CHANGES.html" aria-label="Changes"><!--[--><!--[--><!--]--><!--]-->Changes<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://chevrotain.io/documentation/11_1_2/modules.html" aria-label="APIs" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->APIs<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://chevrotain.io/playground/" aria-label="Playground" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Playground<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://chevrotain.io/performance/" aria-label="Benchmark" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Benchmark<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/Chevrotain/chevrotain/discussions" aria-label="Discussions" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discussions<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/chevrotain/chevrotain" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Guide <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/performance.html" aria-label="Runtime Performance"><!--[--><!--[--><!--]--><!--]-->Runtime Performance<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/initialization_performance.html" aria-label="Initialization Performance"><!--[--><!--[--><!--]--><!--]-->Initialization Performance<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/concrete_syntax_tree.html" aria-label="CST"><!--[--><!--[--><!--]--><!--]-->CST<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/generating_syntax_diagrams.html" aria-label="Syntax Diagrams"><!--[--><!--[--><!--]--><!--]-->Syntax Diagrams<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/custom_token_patterns.html" aria-label="Custom Token Patterns"><!--[--><!--[--><!--]--><!--]-->Custom Token Patterns<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/syntactic_content_assist.html" aria-label="Syntactic Content Assist"><!--[--><!--[--><!--]--><!--]-->Syntactic Content Assist<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/internals.html" aria-label="Internals"><!--[--><!--[--><!--]--><!--]-->Internals<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/docs/guide/resolving_grammar_errors.html" aria-label="Resolving Grammar Errors"><!--[--><!--[--><!--]--><!--]-->Resolving Grammar Errors<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/docs/guide/resolving_lexer_errors.html" aria-label="Resolving Lexer Errors"><!--[--><!--[--><!--]--><!--]-->Resolving Lexer Errors<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="resolving-lexer-errors" tabindex="-1"><a class="header-anchor" href="#resolving-lexer-errors"><span>Resolving Lexer Errors</span></a></h1><ul><li><strong>Warnings</strong><ul><li><a href="#LINE_BREAKS">No LINE_BREAKS Found.</a></li><li><a href="#IDENTIFY_TERMINATOR">Unable to identify line terminator usage in pattern.</a></li><li><a href="#CUSTOM_LINE_BREAK">A Custom Token Pattern should specify the &lt;line_breaks&gt; option.</a></li><li><a href="#REGEXP_PARSING">Failed parsing &lt; /.../ &gt; Using the regexp-to-ast library.</a></li><li><a href="#UNICODE_OPTIMIZE">The regexp unicode flag is not currently supported by the regexp-to-ast library.</a></li><li><a href="#COMPLEMENT">Complement Sets cannot be automatically optimized.</a></li></ul></li></ul><ul><li><strong>Errors</strong><ul><li><a href="#ANCHORS">Unexpected RegExp Anchor Error.</a></li><li><a href="#UNREACHABLE">Token Can Never Be Matched.</a></li><li><a href="#CUSTOM_OPTIMIZE">TokenType &lt;...&gt; is using a custom token pattern without providing &lt;char_start_hint&gt; parameter</a></li><li><a href="#MISSING_LINE_TERM_CHARS">Missing &lt;lineTerminatorCharacters&gt; property on the Lexer config.</a></li></ul></li></ul><h1 id="warnings" tabindex="-1"><a class="header-anchor" href="#warnings"><span>Warnings</span></a></h1><h2 id="LINE_BREAKS" tabindex="-1"><a class="header-anchor" href="#LINE_BREAKS"><span>No LINE_BREAKS Found</span></a></h2><p>A Chevrotain Lexer will by default track the full position information for each token. This includes line and column information.</p><p>In order to support this, the Lexer must be aware of which Tokens may include line terminators. Normally this information can be computed automatically; however, in some cases Chevrotain needs some hints.</p><p>This warning means that the Lexer has been defined to track line and column information (perhaps by default). Yet not a single one of the Token definitions passed to it was detected as possibly containing line terminators.</p><p>To resolve this, choose one of the following:</p><ol><li><p>Disable the line and column position tracking using the <a href="https://chevrotain.io/documentation/11_1_2/interfaces/ILexerConfig.html#positionTracking" target="_blank" rel="noopener noreferrer">positionTracking</a> configuration option.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> myTokens <span class="token operator">=</span> <span class="token punctuation">[</span>IntegerLiteral<span class="token punctuation">,</span> StringLiteral<span class="token punctuation">,</span> WhiteSpace <span class="token comment">/*, ... */</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>myTokens<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">positionTracking</span><span class="token operator">:</span> <span class="token string">&quot;onlyOffset&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Mark the Tokens which may include a line terminator with an explicit line_breaks flag.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> createToken <span class="token operator">=</span> chevrotain<span class="token punctuation">.</span>createToken<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> Whitespace <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Whitespace&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// This is normally computed automatically...</span></span>
<span class="line">  <span class="token literal-property property">line_breaks</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> myTokens <span class="token operator">=</span> <span class="token punctuation">[</span>IntegerLiteral<span class="token punctuation">,</span> StringLiteral<span class="token punctuation">,</span> WhiteSpace <span class="token comment">/*, ... */</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>myTokens<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Note that the definition of what constitutes a line terminator is controlled by the <a href="https://chevrotain.io/documentation/11_1_2/interfaces/ILexerConfig.html#lineTerminatorsPattern" target="_blank" rel="noopener noreferrer">lineTerminatorsPattern</a> lexer configuration property.</p></li><li><p>Also note that multi-line tokens such as some types of comments and string literal tokens may contain line terminators.</p></li></ul></li></ol><h2 id="IDENTIFY_TERMINATOR" tabindex="-1"><a class="header-anchor" href="#IDENTIFY_TERMINATOR"><span>Unable to identify line terminator usage in pattern</span></a></h2><p>A Chevrotain lexer must be aware which of the Token Types may match a line terminator. This is required to compute the correct line and column position information. Normally Chevrotain can identify this information automatically using the <a href="https://github.com/Chevrotain/chevrotain/tree/master/packages/regexp-to-ast" target="_blank" rel="noopener noreferrer">regexp-to-ast</a> package, however sometimes this logic fails. This is only a <strong>warning</strong> which will cause a small performance loss to the lexer and would <strong>not</strong> impact its correctness.</p><p>To resolve this warning, <strong>explicitly</strong> specify the line_breaks option in the offending Token Types:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> MyToken <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyToken&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">abc</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">line_breaks</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> MultiLineStringLiteral <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MultiLineStringLiteral&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">`[^`]*`</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">line_breaks</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Please report an issue in the Chevrotain <a href="https://github.com/Chevrotain/chevrotain/issues" target="_blank" rel="noopener noreferrer">mono-repo</a>, so the root problem can be tracked and resolved.</p><h2 id="CUSTOM_LINE_BREAK" tabindex="-1"><a class="header-anchor" href="#CUSTOM_LINE_BREAK"><span>A Custom Token Pattern should specify the &lt;line_breaks&gt; option</span></a></h2><p>A Chevrotain lexer must be aware which of the Token Types may match a line terminator. It is not possible to do so automatically when using <a href="https://chevrotain.io/docs/guide/custom_token_patterns.html" target="_blank" rel="noopener noreferrer">custom token patterns</a>. This means it is highly recommended to explicitly provide the line_breaks argument when creating a TokenType:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> MyCustomToken <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyCustomToken&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">exec</span><span class="token operator">:</span> matchFunction <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">line_breaks</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> MyCustomMultiLineToken <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyCustomMultiLineToken&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">exec</span><span class="token operator">:</span> matchFunction2 <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">line_breaks</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is only a <strong>warning</strong> which will cause a small performance loss to the lexer and would not impact its correctness. If no explicit &lt;line_break&gt; option is provided, it will be implicitly treated as &quot;true&quot; for <a href="https://chevrotain.io/docs/guide/custom_token_patterns.html" target="_blank" rel="noopener noreferrer">custom token patterns</a>.</p><h2 id="REGEXP_PARSING" tabindex="-1"><a class="header-anchor" href="#REGEXP_PARSING"><span>Failed parsing &lt; /.../ &gt; Using the regexp-to-ast library</span></a></h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matches using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> to be consumed. To apply this optimization the first possible charCodes for <strong>every</strong> Token Type must be identified.</p><p>This analysis is implemented using the <a href="https://github.com/Chevrotain/chevrotain/tree/master/packages/regexp-to-ast" target="_blank" rel="noopener noreferrer">regexp-to-ast</a> sub-package, which means this <strong>warning</strong> usually indicates a bug in the regexp-to-ast package. The impact is only that the optimization described above would become disabled. Lexing and Parsing will still work correctly, just slower.</p><p>Please report an issue in the Chevrotain <a href="https://github.com/Chevrotain/chevrotain/issues" target="_blank" rel="noopener noreferrer">mono-repo</a>. This problem can be <strong>worked around</strong> by explicitly providing a &quot;<a href="https://chevrotain.io/documentation/11_1_2/interfaces/ITokenConfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> Integer <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// let&#39;s assume that this pattern caused an error in regexp-to-ast</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[1-9]\d*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// by explicitly providing the first possible characters of this pattern</span></span>
<span class="line">  <span class="token comment">// the analysis by the regexp-to-ast library will be skipped</span></span>
<span class="line">  <span class="token comment">// and the optimization can be enabled.</span></span>
<span class="line">  <span class="token literal-property property">start_chars_hint</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="UNICODE_OPTIMIZE" tabindex="-1"><a class="header-anchor" href="#UNICODE_OPTIMIZE"><span>The regexp unicode flag is not currently supported by the regexp-to-ast library</span></a></h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matches using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> to be consumed. To apply this optimization the first possible charCodes for <strong>every</strong> TokenType must be identified.</p><p>This analysis is implemented using the <a href="https://github.com/Chevrotain/chevrotain/tree/master/packages/regexp-to-ast" target="_blank" rel="noopener noreferrer">regexp-to-ast</a> sub-package. This library currently does not support the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicode" target="_blank" rel="noopener noreferrer">unicode regexp flag</a>. The impact is that the optimization described above would become disabled. Lexing and Parsing will still work correctly, just slower.</p><p>This issue can be <strong>worked around</strong> by explicitly providing a &quot;<a href="https://chevrotain.io/documentation/11_1_2/interfaces/ITokenConfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// &#39;ðŸ’©&#39; character</span></span>
<span class="line"><span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;PileOfPoo&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// \u{xxxxx} 32bit unicode escape can only be used with the /u flag enabled.</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\u{1F4A9}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// The &#39;ðŸ’©&#39; character is represented by surrogate pairs: &#39;\uD83D\uDCA9&#39;</span></span>
<span class="line">  <span class="token comment">// the start_chars_hint should only be provided the first of the pair.</span></span>
<span class="line">  <span class="token literal-property property">start_chars_hint</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">55357</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Another way to <strong>work around</strong> the issue is to define the pattern as a string literal, as that kind can be trivially optimized. This is naturally only relevant for simple patterns. For example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;LCurley&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// note that the pattern is a string literal, not a regExp literal.</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token string">&quot;{&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="COMPLEMENT" tabindex="-1"><a class="header-anchor" href="#COMPLEMENT"><span>Complement Sets cannot be automatically optimized</span></a></h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matches using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> about to be consumed. To apply this optimization the first possible charCodes for <strong>every</strong> TokenType must be known in advance.</p><p>When a TokenType pattern uses a regExp complement set as a potential <strong>first</strong> character the optimization is skipped as translating a complement set to a regular set is fairly costly during the Lexer&#39;s initialization.</p><p>For example, an XML Text is defined by <strong>everything</strong> except a closing tag.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> XMLText <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;XMLText&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^&lt;&amp;]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This means that there are <strong>65533</strong> (65535 - 2) possible starting charCodes for an XMLText token.</p><p>If the use of these runtime optimizations is needed and the startup resources cost is acceptable, it is possible to enable the optimizations by explicitly providing a &quot;<a href="https://chevrotain.io/documentation/11_1_2/interfaces/ITokenConfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property. E.g.:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> hints <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">65535</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 38 is &#39;&lt;&#39; and 60 is &#39;&amp;&#39;</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!==</span> <span class="token number">38</span> <span class="token operator">||</span> i <span class="token operator">!==</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    hints<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> XMLText <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;XMLText&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^&lt;&amp;]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">start_chars_hint</span><span class="token operator">:</span> hints<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Please note that filling such an array can be CPU intensive. So if you are only parsing small inputs and/or starting a new process for each parser invocation, the added initialization cost may be counterproductive.</p><p>Another solution to this problem is to re-define the Token pattern without using a complement. For example, the XMLText pattern above could be re-defined as:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> XMLText <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;XMLText&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// Equivalent to: /[^&lt;&amp;]+/ but a lot less clear :(</span></span>
<span class="line">  <span class="token comment">// Note that:</span></span>
<span class="line">  <span class="token comment">//   - &quot;\u0026&quot; === &quot;&amp;&quot;</span></span>
<span class="line">  <span class="token comment">//   - &quot;\u003C&quot; === &quot;&lt;&quot;</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\u0000-\u0025\u0027-\u003B\u003D-\uFFFF]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that internally Chevrotain avoids creating a 16-bit large data structure, so this method would be the most optimized both in terms of runtime and initialization time.</p><h1 id="errors" tabindex="-1"><a class="header-anchor" href="#errors"><span>Errors</span></a></h1><h2 id="ANCHORS" tabindex="-1"><a class="header-anchor" href="#ANCHORS"><span>Unexpected RegExp Anchor Error</span></a></h2><p>A Token RegExp pattern used in a chevrotain lexer may not use the start/end of input anchors (&#39;$&#39; and &#39;^&#39;).</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> createToken <span class="token operator">=</span> chevrotain<span class="token punctuation">.</span>createToken<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Using createToken API</span></span>
<span class="line"><span class="token keyword">const</span> Whitespace <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Integer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// invalid pattern using both anchors</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// will throw an error</span></span>
<span class="line"><span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>semVer<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To resolve this, simply avoid using anchors in your Token Type patterns.</p><h2 id="UNREACHABLE" tabindex="-1"><a class="header-anchor" href="#UNREACHABLE"><span>Token can never be matched</span></a></h2><p>This error means that a Token type can never be successfully matched, as a <strong>previous</strong> Token type in the lexer definition will <strong>always</strong> match instead. This happens because the default behavior of Chevrotain is to attempt to match tokens <strong>by the order</strong> described in the lexer definition.</p><p>For example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> ForKeyword <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;ForKeyword&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">for</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> Identifier <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-zA-z]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Will throw Token &lt;ForKeyword&gt; can never be matched...</span></span>
<span class="line"><span class="token comment">// Because the input &quot;for&quot; is also a valid identifier</span></span>
<span class="line"><span class="token comment">// and matching an identifier will be attempted first.</span></span>
<span class="line"><span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Identifier<span class="token punctuation">,</span> ForKeyword<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Note that this validation is limited to simple patterns such as keywords. The more general case of any pattern being a strict subset of a preceding pattern will require much more in-depth RegExp analysis capabilities.</li></ul><p>To resolve this, simply re-arrange the order of Token types in the lexer definition such that the more specific Token types will be listed first.</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token comment">// Identifier is now listed as the last Token type.</span></span>
<span class="line"><span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ForKeyword<span class="token punctuation">,</span> Identifier<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that the solution provided above will create a new problem. Any identifier <strong>starting with</strong> &quot;for&quot; will be lexed as <strong>two separate</strong> tokens, a ForKeyword and an identifier. For example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ForKeyword<span class="token punctuation">,</span> Identifier<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// [</span></span>
<span class="line"><span class="token comment">//    {image:&quot;for&quot;}</span></span>
<span class="line"><span class="token comment">//    {image:&quot;ward&quot;}</span></span>
<span class="line"><span class="token comment">// ]</span></span>
<span class="line"><span class="token keyword">const</span> tokensResult <span class="token operator">=</span> myLexer<span class="token punctuation">.</span><span class="token function">tokenize</span><span class="token punctuation">(</span><span class="token string">&quot;forward&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To resolve this second problem see how to prefer the <strong>longest match</strong> as demonstrated in the <a href="https://github.com/chevrotain/chevrotain/blob/master/examples/lexer/keywords_vs_identifiers/keywords_vs_identifiers.js" target="_blank" rel="noopener noreferrer">keywords vs identifiers example</a>.</p><h2 id="CUSTOM_OPTIMIZE" tabindex="-1"><a class="header-anchor" href="#CUSTOM_OPTIMIZE"><span>TokenType &lt;...&gt; is using a custom token pattern without providing &lt;char_start_hint&gt; parameter</span></a></h2><p>The Chevrotain Lexer performs optimizations by filtering the potential token matches using the next <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt" target="_blank" rel="noopener noreferrer">charCode</a> to be consumed. To apply this optimization the first possible charCodes for <strong>every</strong> TokenType must be identified.</p><p>This information cannot be automatically computed for <a href="https://chevrotain.io/docs/guide/custom_token_patterns.html" target="_blank" rel="noopener noreferrer">custom token patterns</a> and <strong>should</strong> therefore be explicitly provided using the &quot;<a href="https://chevrotain.io/documentation/11_1_2/interfaces/ITokenConfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property.</p><p>For example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> IntegerToken <span class="token operator">=</span> <span class="token function">createToken</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;IntegerToken&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function-variable function">exec</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> offset</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">/* ... */</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">start_chars_hint</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;8&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Providing the &quot;<a href="https://chevrotain.io/documentation/11_1_2/interfaces/ITokenConfig.html#start_chars_hint" target="_blank" rel="noopener noreferrer">start_chars_hint</a>&quot; property is <strong>not</strong> mandatory. It will only enable performance optimizations in the lexer.</p><h2 id="MISSING_LINE_TERM_CHARS" tabindex="-1"><a class="header-anchor" href="#MISSING_LINE_TERM_CHARS"><span>Missing &lt;lineTerminatorCharacters&gt; property on the Lexer config</span></a></h2><p>Chevrotain treats <code>/\n|\r\n?/</code> as line terminators, but that is insufficient for some grammars. Therefore, it is possible to customize the definition of line terminators using the <a href="https://chevrotain.io/documentation/11_1_2/interfaces/ILexerConfig.html#lineTerminatorsPattern" target="_blank" rel="noopener noreferrer">lineTerminatorPattern option</a>. When doing so, however, it is also necessary to provide the <a href="https://chevrotain.io/documentation/11_1_2/interfaces/ILexerConfig.html#lineTerminatorCharacters" target="_blank" rel="noopener noreferrer">lineTerminatorCharacters option</a>. This causes a bit of duplication and may be simplified in future versions.</p><p>Example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> myLexer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">chevrotain<span class="token punctuation">.</span>Lexer</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// For our lexer only &quot;\n&quot; is counted as a line terminator</span></span>
<span class="line">  <span class="token literal-property property">lineTerminatorsPattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\n</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// Duplicate information, &quot;\n&quot;.charCodeAt(0) === 10</span></span>
<span class="line">  <span class="token literal-property property">lineTerminatorCharacters</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/chevrotain/chevrotain/edit/master/packages/website/docs/guide/resolving_lexer_errors.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Edit this page on GitHub<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><time class="meta-item-info" datetime="2026-02-27T19:21:23.000Z" data-allow-mismatch>2/27/26, 9:21 PM</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: shahar.soel@gmail.com">Shahar Soel</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: shachar.soel@sap.com">Soel</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: shahars@protonmail.com">bd82</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: shachar.soel@sap.com">i060847</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: paustint@users.noreply.github.com">Austin Turner</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: shachar.soel@sap.com">I060847</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: tniessen@users.noreply.github.com">Tobias NieÃŸen</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/docs/guide/resolving_grammar_errors.html" aria-label="Resolving Grammar Errors"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Resolving Grammar Errors</span></div><!--]--></a><!----></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/docs/assets/app-BBnv9iX2.js" defer></script>
  </body>
</html>
