/*! For license information please see chevrotain.internal.temp.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("chevrotain",[],e):"object"==typeof exports?exports.chevrotain=e():t.chevrotain=e()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{void 0!==c&&c.toStringTag&&Object.defineProperty(t,c.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{Alternation:()=>pr,Alternative:()=>cr,CstParser:()=>da,EMPTY_ALT:()=>ha,EOF:()=>Lo,EarlyExitException:()=>Ps,EmbeddedActionsParser:()=>fa,GAstVisitor:()=>wo,LLkLookaheadStrategy:()=>Gs,Lexer:()=>mo,LexerDefinitionErrorType:()=>fo,MismatchedTokenException:()=>xs,NoViableAltException:()=>Cs,NonTerminal:()=>sr,NotAllInputParsedException:()=>bs,Option:()=>ur,Parser:()=>ja,ParserDefinitionErrorType:()=>ca,Repetition:()=>dr,RepetitionMandatory:()=>hr,RepetitionMandatoryWithSeparator:()=>lr,RepetitionWithSeparator:()=>fr,Rule:()=>ar,Terminal:()=>mr,VERSION:()=>n,clearCache:()=>Fa,createSyntaxDiagramsCode:()=>Da,createToken:()=>ko,createTokenInstance:()=>xo,defaultLexerErrorProvider:()=>lo,defaultParserErrorProvider:()=>bo,generateCstDts:()=>Ua,getLookaheadPaths:()=>rs,isRecognitionException:()=>ks,serializeGrammar:()=>Tr,serializeProduction:()=>Er,tokenLabel:()=>To,tokenMatcher:()=>Co,tokenName:()=>Eo});const n="10.5.0",r=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},i=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var a=o[++r];if(!1===e(i[a],a,i))break}return t},o="object"==typeof global&&global&&global.Object===Object&&global;var s="object"==typeof self&&self&&self.Object===Object&&self;const a=o||s||Function("return this")();var c=a.Symbol;const u=c;var h=Object.prototype,l=h.hasOwnProperty,d=h.toString,f=u?u.toStringTag:void 0;var p=Object.prototype.toString;var m=u?u.toStringTag:void 0;const T=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":m&&m in Object(t)?function(t){var e=l.call(t,f),n=t[f];try{t[f]=void 0;var r=!0}catch(t){}var i=d.call(t);return r&&(e?t[f]=n:delete t[f]),i}(t):function(t){return p.call(t)}(t)},E=function(t){return null!=t&&"object"==typeof t},g=function(t){return E(t)&&"[object Arguments]"==T(t)};var v=Object.prototype,y=v.hasOwnProperty,A=v.propertyIsEnumerable;const R=g(function(){return arguments}())?g:function(t){return E(t)&&y.call(t,"callee")&&!A.call(t,"callee")},I=Array.isArray;var N="object"==typeof exports&&exports&&!exports.nodeType&&exports,O=N&&"object"==typeof module&&module&&!module.nodeType&&module,_=O&&O.exports===N?a.Buffer:void 0;const S=(_?_.isBuffer:void 0)||function(){return!1};var k=/^(?:0|[1-9]\d*)$/;const L=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&k.test(t))&&t>-1&&t%1==0&&t<e},x=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Arguments]"]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object Boolean]"]=C["[object DataView]"]=C["[object Date]"]=C["[object Error]"]=C["[object Function]"]=C["[object Map]"]=C["[object Number]"]=C["[object Object]"]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object WeakMap]"]=!1;const b=function(t){return function(e){return t(e)}};var P="object"==typeof exports&&exports&&!exports.nodeType&&exports,M=P&&"object"==typeof module&&module&&!module.nodeType&&module,w=M&&M.exports===P&&o.process;const U=function(){try{return M&&M.require&&M.require("util").types||w&&w.binding&&w.binding("util")}catch(t){}}();var D=U&&U.isTypedArray;const F=D?b(D):function(t){return E(t)&&x(t.length)&&!!C[T(t)]};var j=Object.prototype.hasOwnProperty;const $=function(t,e){var n=I(t),r=!n&&R(t),i=!n&&!r&&S(t),o=!n&&!r&&!i&&F(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var u in t)!e&&!j.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||L(u,c))||a.push(u);return a};var B=Object.prototype;const G=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||B)},K=function(t,e){return function(n){return t(e(n))}},W=K(Object.keys,Object);var z=Object.prototype.hasOwnProperty;const V=function(t){if(!G(t))return W(t);var e=[];for(var n in Object(t))z.call(t,n)&&"constructor"!=n&&e.push(n);return e},H=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Y=function(t){if(!H(t))return!1;var e=T(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},X=function(t){return null!=t&&x(t.length)&&!Y(t)},q=function(t){return X(t)?$(t):V(t)},Q=function(t,e){if(null==t)return t;if(!X(t))return function(t,e){return t&&i(t,e,q)}(t,e);for(var n=t.length,r=-1,o=Object(t);++r<n&&!1!==e(o[r],r,o););return t},Z=function(t){return t},J=function(t,e){return(I(t)?r:Q)(t,"function"==typeof(n=e)?n:Z);var n},tt=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},et=function(t){return null==t?[]:function(t,e){return tt(e,(function(e){return t[e]}))}(t,q(t))},nt=a["__core-js_shared__"];var rt,it=(rt=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+rt:"";var ot=Function.prototype.toString;const st=function(t){if(null!=t){try{return ot.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var at=/^\[object .+?Constructor\]$/,ct=Function.prototype,ut=Object.prototype,ht=ct.toString,lt=ut.hasOwnProperty,dt=RegExp("^"+ht.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ft=function(t){return!(!H(t)||(e=t,it&&it in e))&&(Y(t)?dt:at).test(st(t));var e},pt=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ft(n)?n:void 0},mt=pt(a,"DataView"),Tt=pt(a,"Map"),Et=pt(a,"Promise"),gt=pt(a,"Set"),vt=pt(a,"WeakMap");var yt="[object Map]",At="[object Promise]",Rt="[object Set]",It="[object WeakMap]",Nt="[object DataView]",Ot=st(mt),_t=st(Tt),St=st(Et),kt=st(gt),Lt=st(vt),xt=T;(mt&&xt(new mt(new ArrayBuffer(1)))!=Nt||Tt&&xt(new Tt)!=yt||Et&&xt(Et.resolve())!=At||gt&&xt(new gt)!=Rt||vt&&xt(new vt)!=It)&&(xt=function(t){var e=T(t),n="[object Object]"==e?t.constructor:void 0,r=n?st(n):"";if(r)switch(r){case Ot:return Nt;case _t:return yt;case St:return At;case kt:return Rt;case Lt:return It}return e});const Ct=xt;var bt=Object.prototype.hasOwnProperty;const Pt=function(t){if(null==t)return!0;if(X(t)&&(I(t)||"string"==typeof t||"function"==typeof t.splice||S(t)||F(t)||R(t)))return!t.length;var e=Ct(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(G(t))return!V(t).length;for(var n in t)if(bt.call(t,n))return!1;return!0},Mt=function(t,e){return t===e||t!=t&&e!=e},wt=function(t,e){for(var n=t.length;n--;)if(Mt(t[n][0],e))return n;return-1};var Ut=Array.prototype.splice;function Dt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Dt.prototype.clear=function(){this.__data__=[],this.size=0},Dt.prototype.delete=function(t){var e=this.__data__,n=wt(e,t);return!(n<0||(n==e.length-1?e.pop():Ut.call(e,n,1),--this.size,0))},Dt.prototype.get=function(t){var e=this.__data__,n=wt(e,t);return n<0?void 0:e[n][1]},Dt.prototype.has=function(t){return wt(this.__data__,t)>-1},Dt.prototype.set=function(t,e){var n=this.__data__,r=wt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const Ft=Dt,jt=pt(Object,"create");var $t=Object.prototype.hasOwnProperty;var Bt=Object.prototype.hasOwnProperty;function Gt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Gt.prototype.clear=function(){this.__data__=jt?jt(null):{},this.size=0},Gt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gt.prototype.get=function(t){var e=this.__data__;if(jt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return $t.call(e,t)?e[t]:void 0},Gt.prototype.has=function(t){var e=this.__data__;return jt?void 0!==e[t]:Bt.call(e,t)},Gt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=jt&&void 0===e?"__lodash_hash_undefined__":e,this};const Kt=Gt,Wt=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function zt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zt.prototype.clear=function(){this.size=0,this.__data__={hash:new Kt,map:new(Tt||Ft),string:new Kt}},zt.prototype.delete=function(t){var e=Wt(this,t).delete(t);return this.size-=e?1:0,e},zt.prototype.get=function(t){return Wt(this,t).get(t)},zt.prototype.has=function(t){return Wt(this,t).has(t)},zt.prototype.set=function(t,e){var n=Wt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const Vt=zt;function Ht(t){var e=this.__data__=new Ft(t);this.size=e.size}Ht.prototype.clear=function(){this.__data__=new Ft,this.size=0},Ht.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ht.prototype.get=function(t){return this.__data__.get(t)},Ht.prototype.has=function(t){return this.__data__.has(t)},Ht.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ft){var r=n.__data__;if(!Tt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Vt(r)}return n.set(t,e),this.size=n.size,this};const Yt=Ht;function Xt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Vt;++e<n;)this.add(t[e])}Xt.prototype.add=Xt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Xt.prototype.has=function(t){return this.__data__.has(t)};const qt=Xt,Qt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Zt=function(t,e){return t.has(e)},Jt=function(t,e,n,r,i,o){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var u=o.get(t),h=o.get(e);if(u&&h)return u==e&&h==t;var l=-1,d=!0,f=2&n?new qt:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var p=t[l],m=e[l];if(r)var T=s?r(m,p,l,e,t,o):r(p,m,l,t,e,o);if(void 0!==T){if(T)continue;d=!1;break}if(f){if(!Qt(e,(function(t,e){if(!Zt(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d},te=a.Uint8Array,ee=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},ne=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var re=u?u.prototype:void 0,ie=re?re.valueOf:void 0;const oe=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},se=function(t,e,n){var r=e(t);return I(t)?r:oe(r,n(t))},ae=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o},ce=function(){return[]};var ue=Object.prototype.propertyIsEnumerable,he=Object.getOwnPropertySymbols;const le=he?function(t){return null==t?[]:(t=Object(t),ae(he(t),(function(e){return ue.call(t,e)})))}:ce,de=function(t){return se(t,q,le)};var fe=Object.prototype.hasOwnProperty;var pe="[object Arguments]",me="[object Array]",Te="[object Object]",Ee=Object.prototype.hasOwnProperty;const ge=function(t,e,n,r,i,o){var s=I(t),a=I(e),c=s?me:Ct(t),u=a?me:Ct(e),h=(c=c==pe?Te:c)==Te,l=(u=u==pe?Te:u)==Te,d=c==u;if(d&&S(t)){if(!S(e))return!1;s=!0,h=!1}if(d&&!h)return o||(o=new Yt),s||F(t)?Jt(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new te(t),new te(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Mt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=ee;case"[object Set]":var c=1&r;if(a||(a=ne),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);var h=Jt(a(t),a(e),r,i,o,s);return s.delete(t),h;case"[object Symbol]":if(ie)return ie.call(t)==ie.call(e)}return!1}(t,e,c,n,r,i,o);if(!(1&n)){var f=h&&Ee.call(t,"__wrapped__"),p=l&&Ee.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,T=p?e.value():e;return o||(o=new Yt),i(m,T,n,r,o)}}return!!d&&(o||(o=new Yt),function(t,e,n,r,i,o){var s=1&n,a=de(t),c=a.length;if(c!=de(e).length&&!s)return!1;for(var u=c;u--;){var h=a[u];if(!(s?h in e:fe.call(e,h)))return!1}var l=o.get(t),d=o.get(e);if(l&&d)return l==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++u<c;){var m=t[h=a[u]],T=e[h];if(r)var E=s?r(T,m,h,e,t,o):r(m,T,h,t,e,o);if(!(void 0===E?m===T||i(m,T,n,r,o):E)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var g=t.constructor,v=e.constructor;g==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))},ve=function t(e,n,r,i,o){return e===n||(null==e||null==n||!E(e)&&!E(n)?e!=e&&n!=n:ge(e,n,r,i,t,o))},ye=function(t){return t==t&&!H(t)},Ae=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},Re=function(t){var e=function(t){for(var e=q(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ye(i)]}return e}(t);return 1==e.length&&e[0][2]?Ae(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var c=(a=n[i])[0],u=t[c],h=a[1];if(s&&a[2]){if(void 0===u&&!(c in t))return!1}else{var l=new Yt;if(r)var d=r(u,h,c,t,e,l);if(!(void 0===d?ve(h,u,3,r,l):d))return!1}}return!0}(n,t,e)}},Ie=function(t){return"symbol"==typeof t||E(t)&&"[object Symbol]"==T(t)};var Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/;const _e=function(t,e){if(I(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ie(t))||Oe.test(t)||!Ne.test(t)||null!=e&&t in Object(e)};function Se(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Se.Cache||Vt),n}Se.Cache=Vt;var ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/\\(\\)?/g;const xe=(Ce=Se((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ke,(function(t,n,r,i){e.push(r?i.replace(Le,"$1"):n||t)})),e}),(function(t){return 500===be.size&&be.clear(),t})),be=Ce.cache,Ce);var Ce,be,Pe=u?u.prototype:void 0,Me=Pe?Pe.toString:void 0;const we=function t(e){if("string"==typeof e)return e;if(I(e))return tt(e,t)+"";if(Ie(e))return Me?Me.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},Ue=function(t){return null==t?"":we(t)},De=function(t,e){return I(t)?t:_e(t,e)?[t]:xe(Ue(t))},Fe=function(t){if("string"==typeof t||Ie(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},je=function(t,e){for(var n=0,r=(e=De(e,t)).length;null!=t&&n<r;)t=t[Fe(e[n++])];return n&&n==r?t:void 0},$e=function(t,e){return null!=t&&e in Object(t)},Be=function(t,e,n){for(var r=-1,i=(e=De(e,t)).length,o=!1;++r<i;){var s=Fe(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&x(i)&&L(s,i)&&(I(t)||R(t))},Ge=function(t,e){return _e(t)&&ye(e)?Ae(Fe(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:je(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?function(t,e){return null!=t&&Be(t,e,$e)}(n,t):ve(e,r,3)}},Ke=function(t){return _e(t)?(e=Fe(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return je(e,t)}}(t);var e},We=function(t){return"function"==typeof t?t:null==t?Z:"object"==typeof t?I(t)?Ge(t[0],t[1]):Re(t):Ke(t)},ze=function(t,e){var n=-1,r=X(t)?Array(t.length):[];return Q(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},Ve=function(t,e){return(I(t)?tt:ze)(t,We(e))};var He=Object.prototype.hasOwnProperty;const Ye=function(t,e){return null!=t&&He.call(t,e)},Xe=function(t,e){return null!=t&&Be(t,e,Ye)},qe=function(){try{var t=pt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Qe=function(t,e,n){"__proto__"==e&&qe?qe(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Ze=Object.prototype.hasOwnProperty;const Je=function(t,e,n){var r=t[e];Ze.call(t,e)&&Mt(r,n)&&(void 0!==n||e in t)||Qe(t,e,n)},tn=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?Qe(n,a,c):Je(n,a,c)}return n};var en=Object.prototype.hasOwnProperty;const nn=function(t){if(!H(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=G(t),n=[];for(var r in t)("constructor"!=r||!e&&en.call(t,r))&&n.push(r);return n},rn=function(t){return X(t)?$(t,!0):nn(t)};var on="object"==typeof exports&&exports&&!exports.nodeType&&exports,sn=on&&"object"==typeof module&&module&&!module.nodeType&&module,an=sn&&sn.exports===on?a.Buffer:void 0,cn=an?an.allocUnsafe:void 0;const un=K(Object.getPrototypeOf,Object),hn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)oe(e,le(t)),t=un(t);return e}:ce,ln=function(t){return se(t,rn,hn)};var dn=Object.prototype.hasOwnProperty;const fn=function(t){var e=new t.constructor(t.byteLength);return new te(e).set(new te(t)),e};var pn=/\w*$/;var mn=u?u.prototype:void 0,Tn=mn?mn.valueOf:void 0;const En=function(t,e,n){var r,i=t.constructor;switch(e){case"[object ArrayBuffer]":return fn(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return function(t,e){var n=e?fn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?fn(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,pn.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return r=t,Tn?Object(Tn.call(r)):{}}};var gn=Object.create;const vn=function(){function t(){}return function(e){if(!H(e))return{};if(gn)return gn(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var yn=U&&U.isMap;const An=yn?b(yn):function(t){return E(t)&&"[object Map]"==Ct(t)};var Rn=U&&U.isSet;const In=Rn?b(Rn):function(t){return E(t)&&"[object Set]"==Ct(t)};var Nn="[object Arguments]",On="[object Function]",_n="[object Object]",Sn={};Sn[Nn]=Sn["[object Array]"]=Sn["[object ArrayBuffer]"]=Sn["[object DataView]"]=Sn["[object Boolean]"]=Sn["[object Date]"]=Sn["[object Float32Array]"]=Sn["[object Float64Array]"]=Sn["[object Int8Array]"]=Sn["[object Int16Array]"]=Sn["[object Int32Array]"]=Sn["[object Map]"]=Sn["[object Number]"]=Sn[_n]=Sn["[object RegExp]"]=Sn["[object Set]"]=Sn["[object String]"]=Sn["[object Symbol]"]=Sn["[object Uint8Array]"]=Sn["[object Uint8ClampedArray]"]=Sn["[object Uint16Array]"]=Sn["[object Uint32Array]"]=!0,Sn["[object Error]"]=Sn[On]=Sn["[object WeakMap]"]=!1;const kn=function t(e,n,i,o,s,a){var c,u=1&n,h=2&n,l=4&n;if(i&&(c=s?i(e,o,s,a):i(e)),void 0!==c)return c;if(!H(e))return e;var d=I(e);if(d){if(c=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&dn.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!u)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(e,c)}else{var f=Ct(e),p=f==On||"[object GeneratorFunction]"==f;if(S(e))return function(t,e){if(e)return t.slice();var n=t.length,r=cn?cn(n):new t.constructor(n);return t.copy(r),r}(e,u);if(f==_n||f==Nn||p&&!s){if(c=h||p?{}:function(t){return"function"!=typeof t.constructor||G(t)?{}:vn(un(t))}(e),!u)return h?function(t,e){return tn(t,hn(t),e)}(e,function(t,e){return t&&tn(e,rn(e),t)}(c,e)):function(t,e){return tn(t,le(t),e)}(e,function(t,e){return t&&tn(e,q(e),t)}(c,e))}else{if(!Sn[f])return s?e:{};c=En(e,f,u)}}a||(a=new Yt);var m=a.get(e);if(m)return m;a.set(e,c),In(e)?e.forEach((function(r){c.add(t(r,n,i,r,e,a))})):An(e)&&e.forEach((function(r,o){c.set(o,t(r,n,i,o,e,a))}));var T=d?void 0:(l?h?ln:de:h?rn:q)(e);return r(T||e,(function(r,o){T&&(r=e[o=r]),Je(c,o,t(r,n,i,o,e,a))})),c},Ln=function(t){return kn(t,4)};function xn(t){function e(){}e.prototype=t;const n=new e;function r(){return typeof n.bar}return r(),r(),t}const Cn=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};var bn=/\s/;var Pn=/^\s+/;const Mn=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&bn.test(t.charAt(e)););return e}(t)+1).replace(Pn,""):t};var wn=/^[-+]0x[0-9a-f]+$/i,Un=/^0b[01]+$/i,Dn=/^0o[0-7]+$/i,Fn=parseInt;const jn=function(t){return t?Infinity===(t=function(t){if("number"==typeof t)return t;if(Ie(t))return NaN;if(H(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=H(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Mn(t);var n=Un.test(t);return n||Dn.test(t)?Fn(t.slice(2),n?2:8):wn.test(t)?NaN:+t}(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0},$n=function(t){var e=jn(t),n=e%1;return e==e?n?e-n:e:0},Bn=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:$n(e),Cn(t,e<0?0:e,r)):[]},Gn=function(t){return"string"==typeof t||!I(t)&&E(t)&&"[object String]"==T(t)};var Kn=Math.max;const Wn=qe?function(t,e){return qe(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Z;var zn=Date.now;const Vn=(Hn=Wn,Yn=0,Xn=0,function(){var t=zn(),e=16-(t-Xn);if(Xn=t,e>0){if(++Yn>=800)return arguments[0]}else Yn=0;return Hn.apply(void 0,arguments)});var Hn,Yn,Xn;const qn=function(t,e){return Vn(function(t,e,n){return e=Kn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Kn(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}(t,e,Z),t+"")},Qn=function(t,e,n){if(!H(n))return!1;var r=typeof e;return!!("number"==r?X(n)&&L(e,n.length):"string"==r&&e in n)&&Mt(n[e],t)};var Zn=Object.prototype.hasOwnProperty;const Jn=(tr=function(t,e){if(G(e)||X(e))tn(e,q(e),t);else for(var n in e)Zn.call(e,n)&&Je(t,n,e[n])},qn((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=tr.length>3&&"function"==typeof i?(r--,i):void 0,o&&Qn(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var s=e[n];s&&tr(t,s,n,i)}return t})));var tr;const er=function(t,e,n,r){if(!H(t))return t;for(var i=-1,o=(e=De(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var c=Fe(e[i]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(i!=s){var h=a[c];void 0===(u=r?r(h,c,a):void 0)&&(u=H(h)?h:L(e[i+1])?[]:{})}Je(a,c,u),a=a[c]}return t},nr=function(t,e){if(null==t)return{};var n=tt(ln(t),(function(t){return[t]}));return e=We(e),function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=je(t,s);n(a,s)&&er(o,De(s,t),a)}return o}(t,n,(function(t,n){return e(t,n[0])}))};var rr=U&&U.isRegExp;const ir=rr?b(rr):function(t){return E(t)&&"[object RegExp]"==T(t)};class or{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),J(this.definition,(e=>{e.accept(t)}))}}class sr extends or{constructor(t){super([]),this.idx=1,Jn(this,nr(t,(t=>void 0!==t)))}set definition(t){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(t){t.visit(this)}}class ar extends or{constructor(t){super(t.definition),this.orgText="",Jn(this,nr(t,(t=>void 0!==t)))}}class cr extends or{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,Jn(this,nr(t,(t=>void 0!==t)))}}class ur extends or{constructor(t){super(t.definition),this.idx=1,Jn(this,nr(t,(t=>void 0!==t)))}}class hr extends or{constructor(t){super(t.definition),this.idx=1,Jn(this,nr(t,(t=>void 0!==t)))}}class lr extends or{constructor(t){super(t.definition),this.idx=1,Jn(this,nr(t,(t=>void 0!==t)))}}class dr extends or{constructor(t){super(t.definition),this.idx=1,Jn(this,nr(t,(t=>void 0!==t)))}}class fr extends or{constructor(t){super(t.definition),this.idx=1,Jn(this,nr(t,(t=>void 0!==t)))}}class pr extends or{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Jn(this,nr(t,(t=>void 0!==t)))}}class mr{constructor(t){this.idx=1,Jn(this,nr(t,(t=>void 0!==t)))}accept(t){t.visit(this)}}function Tr(t){return Ve(t,Er)}function Er(t){function e(t){return Ve(t,Er)}if(t instanceof sr){const e={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return Gn(t.label)&&(e.label=t.label),e}if(t instanceof cr)return{type:"Alternative",definition:e(t.definition)};if(t instanceof ur)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof hr)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof lr)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Er(new mr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof fr)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Er(new mr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof dr)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof pr)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof mr){const e={type:"Terminal",name:t.terminalType.name,label:(n=t.terminalType,Gn((r=n).LABEL)&&""!==r.LABEL?n.LABEL:n.name),idx:t.idx};Gn(t.label)&&(e.terminalLabel=t.label);const i=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(e.pattern=ir(i)?i.source:i),e}var n,r;if(t instanceof ar)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}class gr{walk(t,e=[]){J(t.definition,((n,r)=>{const i=Bn(t.definition,r+1);if(n instanceof sr)this.walkProdRef(n,i,e);else if(n instanceof mr)this.walkTerminal(n,i,e);else if(n instanceof cr)this.walkFlat(n,i,e);else if(n instanceof ur)this.walkOption(n,i,e);else if(n instanceof hr)this.walkAtLeastOne(n,i,e);else if(n instanceof lr)this.walkAtLeastOneSep(n,i,e);else if(n instanceof fr)this.walkManySep(n,i,e);else if(n instanceof dr)this.walkMany(n,i,e);else{if(!(n instanceof pr))throw Error("non exhaustive match");this.walkOr(n,i,e)}}))}walkTerminal(t,e,n){}walkProdRef(t,e,n){}walkFlat(t,e,n){const r=e.concat(n);this.walk(t,r)}walkOption(t,e,n){const r=e.concat(n);this.walk(t,r)}walkAtLeastOne(t,e,n){const r=[new ur({definition:t.definition})].concat(e,n);this.walk(t,r)}walkAtLeastOneSep(t,e,n){const r=vr(t,e,n);this.walk(t,r)}walkMany(t,e,n){const r=[new ur({definition:t.definition})].concat(e,n);this.walk(t,r)}walkManySep(t,e,n){const r=vr(t,e,n);this.walk(t,r)}walkOr(t,e,n){const r=e.concat(n);J(t.definition,(t=>{const e=new cr({definition:[t]});this.walk(e,r)}))}}function vr(t,e,n){return[new ur({definition:[new mr({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}const yr=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1},Ar=function(t){return t!=t},Rr=function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):yr(t,Ar,n)},Ir=function(t,e){return!(null==t||!t.length)&&Rr(t,e,0)>-1},Nr=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},Or=function(){};const _r=gt&&1/ne(new gt([,-0]))[1]==1/0?function(t){return new gt(t)}:Or,Sr=function(t){return t&&t.length?function(t,e,n){var r=-1,i=Ir,o=t.length,s=!0,a=[],c=a;if(n)s=!1,i=Nr;else if(o>=200){var u=e?null:_r(t);if(u)return ne(u);s=!1,i=Zt,c=new qt}else c=e?[]:a;t:for(;++r<o;){var h=t[r],l=e?e(h):h;if(h=n||0!==h?h:0,s&&l==l){for(var d=c.length;d--;)if(c[d]===l)continue t;e&&c.push(l),a.push(h)}else i(c,l,n)||(c!==a&&c.push(l),a.push(h))}return a}(t):[]};var kr=u?u.isConcatSpreadable:void 0;const Lr=function(t){return I(t)||R(t)||!!(kr&&t&&t[kr])},xr=function t(e,n,r,i,o){var s=-1,a=e.length;for(r||(r=Lr),o||(o=[]);++s<a;){var c=e[s];n>0&&r(c)?n>1?t(c,n-1,r,i,o):oe(o,c):i||(o[o.length]=c)}return o},Cr=function(t){return null!=t&&t.length?xr(t,1):[]},br=function(t,e){var n;return Q(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n},Pr=function(t,e,n){var r=I(t)?Qt:br;return n&&Qn(t,e,n)&&(e=void 0),r(t,We(e))};var Mr=Math.max;const wr=function(t,e,n,r){t=X(t)?t:et(t),n=n&&!r?$n(n):0;var i=t.length;return n<0&&(n=Mr(i+n,0)),Gn(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Rr(t,e,n)>-1},Ur=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0},Dr=function(t,e){var n=!0;return Q(t,(function(t,r,i){return n=!!e(t,r,i)})),n},Fr=function(t,e,n){var r=I(t)?Ur:Dr;return n&&Qn(t,e,n)&&(e=void 0),r(t,We(e))};function jr(t,e=[]){return!!(t instanceof ur||t instanceof dr||t instanceof fr)||(t instanceof pr?Pr(t.definition,(t=>jr(t,e))):!(t instanceof sr&&wr(e,t))&&t instanceof or&&(t instanceof sr&&e.push(t),Fr(t.definition,(t=>jr(t,e)))))}function $r(t){if(t instanceof sr)return"SUBRULE";if(t instanceof ur)return"OPTION";if(t instanceof pr)return"OR";if(t instanceof hr)return"AT_LEAST_ONE";if(t instanceof lr)return"AT_LEAST_ONE_SEP";if(t instanceof fr)return"MANY_SEP";if(t instanceof dr)return"MANY";if(t instanceof mr)return"CONSUME";throw Error("non exhaustive match")}function Br(t){if(t instanceof sr)return Br(t.referencedRule);if(t instanceof mr)return[t.terminalType];if(function(t){return t instanceof cr||t instanceof ur||t instanceof dr||t instanceof hr||t instanceof lr||t instanceof fr||t instanceof mr||t instanceof ar}(t))return function(t){let e=[];const n=t.definition;let r,i=0,o=n.length>i,s=!0;for(;o&&s;)r=n[i],s=jr(r),e=e.concat(Br(r)),i+=1,o=n.length>i;return Sr(e)}(t);if(function(t){return t instanceof pr}(t))return function(t){const e=Ve(t.definition,(t=>Br(t)));return Sr(Cr(e))}(t);throw Error("non exhaustive match")}const Gr="_~IN~_";class Kr extends gr{constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,e,n){}walkProdRef(t,e,n){const r=(i=t.referencedRule,o=t.idx,i.name+o+Gr+this.topProd.name);var i,o;const s=e.concat(n),a=Br(new cr({definition:s}));this.follows[r]=a}}const Wr=function(t){return void 0===t};function zr(t){return t.charCodeAt(0)}function Vr(t,e){Array.isArray(t)?t.forEach((function(t){e.push(t)})):e.push(t)}function Hr(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e],t[e]=!0}function Yr(t){if(void 0===t)throw Error("Internal Error - Should never get here!");return!0}function Xr(){throw Error("Internal Error - Should never get here!")}function qr(t){return"Character"===t.type}const Qr=[];for(let t=zr("0");t<=zr("9");t++)Qr.push(t);const Zr=[zr("_")].concat(Qr);for(let t=zr("a");t<=zr("z");t++)Zr.push(t);for(let t=zr("A");t<=zr("Z");t++)Zr.push(t);const Jr=[zr(" "),zr("\f"),zr("\n"),zr("\r"),zr("\t"),zr("\v"),zr("\t"),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr(" "),zr("\u2028"),zr("\u2029"),zr(" "),zr(" "),zr("　"),zr("\ufeff")],ti=/[0-9a-fA-F]/,ei=/[0-9]/,ni=/[1-9]/;class ri{visitChildren(t){for(const e in t){const n=t[e];t.hasOwnProperty(e)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((t=>{this.visit(t)}),this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}}var ii=Object.prototype,oi=ii.hasOwnProperty;const si=qn((function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Qn(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=rn(o),a=-1,c=s.length;++a<c;){var u=s[a],h=t[u];(void 0===h||Mt(h,ii[u])&&!oi.call(t,u))&&(t[u]=o[u])}return t})),ai=function(t,e){var n=[];return Q(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n},ci=function(t,e){return(I(t)?ae:ai)(t,function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}(We(e)))};var ui=Math.max;const hi=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:$n(n);return i<0&&(i=ui(r+i,0)),Rr(t,e,i)},li=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},di=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n},fi=function(t,e,n){var r=I(t)?li:di,i=arguments.length<3;return r(t,We(e),n,i,Q)},pi=function(t,e){return(I(t)?ae:ai)(t,We(e))},mi=function(t){return E(t)&&X(t)};var Ti=qn((function(t,e){return mi(t)?function(t,e,n,r){var i=-1,o=Ir,s=!0,a=t.length,c=[],u=e.length;if(!a)return c;n&&(e=tt(e,b(n))),r?(o=Nr,s=!1):e.length>=200&&(o=Zt,s=!1,e=new qt(e));t:for(;++i<a;){var h=t[i],l=null==n?h:n(h);if(h=r||0!==h?h:0,s&&l==l){for(var d=u;d--;)if(e[d]===l)continue t;c.push(h)}else o(e,l,r)||c.push(h)}return c}(t,xr(e,1,mi,!0)):[]}));const Ei=Ti,gi=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},vi=function(t){return t&&t.length?t[0]:void 0};var yi=Math.max;const Ai=(Ri=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:$n(n);return i<0&&(i=yi(r+i,0)),yr(t,We(e),i)},function(t,e,n){var r=Object(t);if(!X(t)){var i=We(e);t=q(t),e=function(t){return i(r[t],t,r)}}var o=Ri(t,e,n);return o>-1?r[i?t[o]:o]:void 0});var Ri;function Ii(t){console&&console.error&&console.error(`Error: ${t}`)}function Ni(t){console&&console.warn&&console.warn(`Warning: ${t}`)}let Oi={};const _i=new class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");const e=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Hr(n,"global");break;case"i":Hr(n,"ignoreCase");break;case"m":Hr(n,"multiLine");break;case"u":Hr(n,"unicode");break;case"y":Hr(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:e,loc:this.loc(0)}}disjunction(){const t=[],e=this.idx;for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(e)}}alternative(){const t=[],e=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(e)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":let e;switch(this.consumeChar("?"),this.popChar()){case"=":e="Lookahead";break;case"!":e="NegativeLookahead"}Yr(e);const n=this.disjunction();return this.consumeChar(")"),{type:e,value:n,loc:this.loc(t)}}return Xr()}quantifier(t=!1){let e;const n=this.idx;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":const n=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:n,atMost:n};break;case",":let t;this.isDigit()?(t=this.integerIncludingZero(),e={atLeast:n,atMost:t}):e={atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;Yr(e)}if(!0!==t||void 0!==e)return Yr(e)?("?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e.loc=this.loc(n),e):void 0}atom(){let t;const e=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),Yr(t)?(t.loc=this.loc(e),this.isQuantifier()&&(t.quantifier=this.quantifier()),t):Xr()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[zr("\n"),zr("\r"),zr("\u2028"),zr("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,e=!1;switch(this.popChar()){case"d":t=Qr;break;case"D":t=Qr,e=!0;break;case"s":t=Jr;break;case"S":t=Jr,e=!0;break;case"w":t=Zr;break;case"W":t=Zr,e=!0}return Yr(t)?{type:"Set",value:t,complement:e}:Xr()}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=zr("\f");break;case"n":t=zr("\n");break;case"r":t=zr("\r");break;case"t":t=zr("\t");break;case"v":t=zr("\v")}return Yr(t)?{type:"Character",value:t}:Xr()}controlLetterEscapeAtom(){this.consumeChar("c");const t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:zr("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:zr(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:zr(this.popChar())}}}characterClass(){const t=[];let e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){const e=this.classAtom();if(e.type,qr(e)&&this.isRangeDash()){this.consumeChar("-");const n=this.classAtom();if(n.type,qr(n)){if(n.value<e.value)throw Error("Range out of order in character class");t.push({from:e.value,to:n.value})}else Vr(e.value,t),t.push(zr("-")),Vr(n.value,t)}else Vr(e.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:zr("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;this.consumeChar("("),"?"===this.peekChar(0)?(this.consumeChar("?"),this.consumeChar(":"),t=!1):this.groupIdx++;const e=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:t,value:e};return t&&(n.idx=this.groupIdx),n}positiveInteger(){let t=this.popChar();if(!1===ni.test(t))throw Error("Expecting a positive integer");for(;ei.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(!1===ei.test(t))throw Error("Expecting an integer");for(;ei.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){const t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:zr(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return ei.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){const t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let e="";for(let n=0;n<t;n++){const t=this.popChar();if(!1===ti.test(t))throw Error("Expecting a HexDecimal digits");e+=t}return{type:"Character",value:parseInt(e,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){const t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}};function Si(t){const e=t.toString();if(Oi.hasOwnProperty(e))return Oi[e];{const t=_i.pattern(e);return Oi[e]=t,t}}const ki="Complement Sets are not supported for first char optimization",Li='Unable to use "first char" lexer optimizations:\n';function xi(t,e=!1){try{const e=Si(t);return Ci(e.value,{},e.flags.ignoreCase)}catch(n){if(n.message===ki)e&&Ni(`${Li}\tUnable to optimize: < ${t.toString()} >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),Ii(`${Li}\n\tFailed parsing: < ${t.toString()} >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function Ci(t,e,n){switch(t.type){case"Disjunction":for(let r=0;r<t.value.length;r++)Ci(t.value[r],e,n);break;case"Alternative":const r=t.value;for(let t=0;t<r.length;t++){const i=r[t];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const o=i;switch(o.type){case"Character":bi(o.value,e,n);break;case"Set":if(!0===o.complement)throw Error(ki);J(o.value,(t=>{if("number"==typeof t)bi(t,e,n);else{const r=t;if(!0===n)for(let t=r.from;t<=r.to;t++)bi(t,e,n);else{for(let t=r.from;t<=r.to&&t<Qi;t++)bi(t,e,n);if(r.to>=Qi){const t=r.from>=Qi?r.from:Qi,n=r.to,i=Ji(t),o=Ji(n);for(let t=i;t<=o;t++)e[t]=t}}}}));break;case"Group":Ci(o.value,e,n);break;default:throw Error("Non Exhaustive Match")}const s=void 0!==o.quantifier&&0===o.quantifier.atLeast;if("Group"===o.type&&!1===Mi(o)||"Group"!==o.type&&!1===s)break}break;default:throw Error("non exhaustive match!")}return et(e)}function bi(t,e,n){const r=Ji(t);e[r]=r,!0===n&&function(t,e){const n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){const t=Ji(r.charCodeAt(0));e[t]=t}else{const t=n.toLowerCase();if(t!==n){const n=Ji(t.charCodeAt(0));e[n]=n}}}(t,e)}function Pi(t,e){return Ai(t.value,(t=>{if("number"==typeof t)return wr(e,t);{const n=t;return void 0!==Ai(e,(t=>n.from<=t&&t<=n.to))}}))}function Mi(t){const e=t.quantifier;return!(!e||0!==e.atLeast)||!!t.value&&(I(t.value)?Fr(t.value,Mi):Mi(t.value))}class wi extends ri{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(!0!==this.found){switch(t.type){case"Lookahead":return void this.visitLookahead(t);case"NegativeLookahead":return void this.visitNegativeLookahead(t)}super.visitChildren(t)}}visitCharacter(t){wr(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?void 0===Pi(t,this.targetCharCodes)&&(this.found=!0):void 0!==Pi(t,this.targetCharCodes)&&(this.found=!0)}}function Ui(t,e){if(e instanceof RegExp){const n=Si(e),r=new wi(t);return r.visit(n),r.found}return void 0!==Ai(e,(e=>wr(t,e.charCodeAt(0))))}const Di="PATTERN",Fi="defaultMode",ji="modes";let $i="boolean"==typeof new RegExp("(?:)").sticky;const Bi=/[^\\][$]/,Gi=/[^\\[][\^]|^\^/;function Ki(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Wi(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function zi(t){const e=t.PATTERN;if(ir(e))return!1;if(Y(e))return!0;if(Xe(e,"exec"))return!0;if(Gn(e))return!1;throw Error("non exhaustive match")}function Vi(t){return!(!Gn(t)||1!==t.length)&&t.charCodeAt(0)}const Hi={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const e=t.charCodeAt(n);if(10===e)return this.lastIndex=n+1,!0;if(13===e)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function Yi(t,e){if(Xe(t,"LINE_BREAKS"))return!1;if(ir(t.PATTERN)){try{Ui(e,t.PATTERN)}catch(t){return{issue:fo.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if(Gn(t.PATTERN))return!1;if(zi(t))return{issue:fo.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function Xi(t){return Ve(t,(t=>Gn(t)?t.charCodeAt(0):t))}function qi(t,e,n){void 0===t[e]?t[e]=[n]:t[e].push(n)}const Qi=256;let Zi=[];function Ji(t){return t<Qi?t:Zi[t]}const to=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};function eo(t){const e=(new Date).getTime(),n=t();return{time:(new Date).getTime()-e,value:n}}function no(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]}function ro(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let io=1;const oo={};function so(t){const e=function(t){let e=Ln(t),n=t,r=!0;for(;r;){n=gi(Cr(Ve(n,(t=>t.CATEGORIES))));const t=Ei(n,e);e=e.concat(t),Pt(t)?r=!1:n=t}return e}(t);!function(t){J(t,(t=>{co(t)||(oo[io]=t,t.tokenTypeIdx=io++),uo(t)&&!I(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),uo(t)||(t.CATEGORIES=[]),Xe(t,"categoryMatches")||(t.categoryMatches=[]),Xe(t,"categoryMatchesMap")||(t.categoryMatchesMap={})}))}(e),function(t){J(t,(t=>{ao([],t)}))}(e),function(t){J(t,(t=>{t.categoryMatches=[],J(t.categoryMatchesMap,((e,n)=>{t.categoryMatches.push(oo[n].tokenTypeIdx)}))}))}(e),J(e,(t=>{t.isParent=t.categoryMatches.length>0}))}function ao(t,e){J(t,(t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0})),J(e.CATEGORIES,(n=>{const r=t.concat(e);wr(r,n)||ao(r,n)}))}function co(t){return Xe(t,"tokenTypeIdx")}function uo(t){return Xe(t,"CATEGORIES")}function ho(t){return Xe(t,"tokenTypeIdx")}const lo={buildUnableToPopLexerModeMessage:t=>`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(t,e,n,r,i)=>`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`};var fo;!function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"}(fo||(fo={}));const po={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:lo,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(po);class mo{constructor(t,e=po){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(t,e)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--\x3e <${t}>`);const{time:r,value:i}=eo(e),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${t}> time: ${r}ms`),this.traceInitIndent--,i}return e()},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=Jn({},po,e);const n=this.config.traceInitPerf;!0===n?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof n&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(()=>{let n,r=!0;this.TRACE_INIT("Lexer Config handling",(()=>{if(this.config.lineTerminatorsPattern===po.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Hi;else if(this.config.lineTerminatorCharacters===po.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),I(t)?n={modes:{defaultMode:Ln(t)},defaultMode:Fi}:(r=!1,n=Ln(t))})),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(function(t,e,n){const r=[];return Xe(t,Fi)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Fi+"> property in its definition\n",type:fo.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Xe(t,ji)||r.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:fo.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Xe(t,ji)&&Xe(t,Fi)&&!Xe(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${Fi}: <${t.defaultMode}>which does not exist\n`,type:fo.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Xe(t,ji)&&J(t.modes,((t,e)=>{J(t,((n,i)=>{if(Wr(n))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${e}> at index: <${i}>\n`,type:fo.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Xe(n,"LONGER_ALT")){const i=I(n.LONGER_ALT)?n.LONGER_ALT:[n.LONGER_ALT];J(i,(i=>{Wr(i)||wr(t,i)||r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${i.name}> on token <${n.name}> outside of mode <${e}>\n`,type:fo.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})}))}}))})),r}(n,this.trackStartLines,this.config.lineTerminatorCharacters))})),this.TRACE_INIT("performWarningRuntimeChecks",(()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(function(t,e,n){const r=[];let i=!1;const o=gi(Cr(et(t.modes))),s=ci(o,(t=>t[Di]===mo.NA)),a=Xi(n);return e&&J(s,(t=>{const e=Yi(t,a);if(!1!==e){const n=function(t,e){if(e.issue===fo.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${t.name}> Token Type\n\t Root cause: ${e.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===fo.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${t.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}(t,e),i={message:n,type:e.issue,tokenType:t};r.push(i)}else Xe(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(i=!0):Ui(a,t.PATTERN)&&(i=!0)})),e&&!i&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:fo.NO_LINE_BREAKS_FLAGS}),r}(n,this.trackStartLines,this.config.lineTerminatorCharacters))}))),n.modes=n.modes?n.modes:{},J(n.modes,((t,e)=>{n.modes[e]=ci(t,(t=>Wr(t)))}));const i=q(n.modes);if(J(n.modes,((t,n)=>{this.TRACE_INIT(`Mode: <${n}> processing`,(()=>{if(this.modes.push(n),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(function(t,e){let n=[];const r=function(t){const e=pi(t,(t=>!Xe(t,Di)));return{errors:Ve(e,(t=>({message:"Token Type: ->"+t.name+"<- missing static 'PATTERN' property",type:fo.MISSING_PATTERN,tokenTypes:[t]}))),valid:Ei(t,e)}}(t);n=n.concat(r.errors);const i=function(t){const e=pi(t,(t=>{const e=t[Di];return!(ir(e)||Y(e)||Xe(e,"exec")||Gn(e))}));return{errors:Ve(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:fo.INVALID_PATTERN,tokenTypes:[t]}))),valid:Ei(t,e)}}(r.valid),o=i.valid;return n=n.concat(i.errors),n=n.concat(function(t){let e=[];const n=pi(t,(t=>ir(t[Di])));return e=e.concat(function(t){class e extends ri{constructor(){super(...arguments),this.found=!1}visitEndAnchor(t){this.found=!0}}const n=pi(t,(t=>{const n=t.PATTERN;try{const t=Si(n),r=new e;return r.visit(t),r.found}catch(t){return Bi.test(n.source)}}));return Ve(n,(t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:fo.EOI_ANCHOR_FOUND,tokenTypes:[t]})))}(n)),e=e.concat(function(t){class e extends ri{constructor(){super(...arguments),this.found=!1}visitStartAnchor(t){this.found=!0}}const n=pi(t,(t=>{const n=t.PATTERN;try{const t=Si(n),r=new e;return r.visit(t),r.found}catch(t){return Gi.test(n.source)}}));return Ve(n,(t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:fo.SOI_ANCHOR_FOUND,tokenTypes:[t]})))}(n)),e=e.concat(function(t){const e=pi(t,(t=>{const e=t[Di];return e instanceof RegExp&&(e.multiline||e.global)}));return Ve(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:fo.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]})))}(n)),e=e.concat(function(t){const e=[];let n=Ve(t,(n=>fi(t,((t,r)=>(n.PATTERN.source!==r.PATTERN.source||wr(e,r)||r.PATTERN===mo.NA||(e.push(r),t.push(r)),t)),[])));n=gi(n);const r=pi(n,(t=>t.length>1));return Ve(r,(t=>{const e=Ve(t,(t=>t.name));return{message:`The same RegExp pattern ->${vi(t).PATTERN}<-has been used in all of the following Token Types: ${e.join(", ")} <-`,type:fo.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}}))}(n)),e=e.concat(function(t){const e=pi(t,(t=>t.PATTERN.test("")));return Ve(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' must not match an empty string",type:fo.EMPTY_MATCH_PATTERN,tokenTypes:[t]})))}(n)),e}(o)),n=n.concat(function(t){const e=pi(t,(t=>{if(!Xe(t,"GROUP"))return!1;const e=t.GROUP;return e!==mo.SKIPPED&&e!==mo.NA&&!Gn(e)}));return Ve(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:fo.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]})))}(o)),n=n.concat(function(t,e){const n=pi(t,(t=>void 0!==t.PUSH_MODE&&!wr(e,t.PUSH_MODE)));return Ve(n,(t=>({message:`Token Type: ->${t.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${t.PUSH_MODE}<-which does not exist`,type:fo.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]})))}(o,e)),n=n.concat(function(t){const e=[],n=fi(t,((t,e,n)=>{const r=e.PATTERN;return r===mo.NA||(Gn(r)?t.push({str:r,idx:n,tokenType:e}):ir(r)&&(i=r,void 0===Ai([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(t=>-1!==i.source.indexOf(t))))&&t.push({str:r.source,idx:n,tokenType:e})),t;var i}),[]);return J(t,((t,r)=>{J(n,(({str:n,idx:i,tokenType:o})=>{if(r<i&&function(t,e){if(ir(e)){const n=e.exec(t);return null!==n&&0===n.index}if(Y(e))return e(t,0,[],{});if(Xe(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}(n,t.PATTERN)){const n=`Token: ->${o.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${t.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:n,type:fo.UNREACHABLE_PATTERN,tokenTypes:[t,o]})}}))})),e}(o)),n}(t,i))})),Pt(this.lexerDefinitionErrors)){let r;so(t),this.TRACE_INIT("analyzeTokenTypes",(()=>{r=function(t,e){const n=(e=si(e,{useSticky:$i,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:(t,e)=>e()})).tracer;let r;n("initCharCodeToOptimizedIndexMap",(()=>{!function(){if(Pt(Zi)){Zi=new Array(65536);for(let t=0;t<65536;t++)Zi[t]=t>255?255+~~(t/255):t}}()})),n("Reject Lexer.NA",(()=>{r=ci(t,(t=>t[Di]===mo.NA))}));let i,o,s,a,c,u,h,l,d,f,p,m=!1;n("Transform Patterns",(()=>{m=!1,i=Ve(r,(t=>{const n=t[Di];if(ir(n)){const t=n.source;return 1!==t.length||"^"===t||"$"===t||"."===t||n.ignoreCase?2!==t.length||"\\"!==t[0]||wr(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],t[1])?e.useSticky?Wi(n):Ki(n):t[1]:t}if(Y(n))return m=!0,{exec:n};if("object"==typeof n)return m=!0,n;if("string"==typeof n){if(1===n.length)return n;{const t=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=new RegExp(t);return e.useSticky?Wi(r):Ki(r)}}throw Error("non exhaustive match")}))})),n("misc mapping",(()=>{o=Ve(r,(t=>t.tokenTypeIdx)),s=Ve(r,(t=>{const e=t.GROUP;if(e!==mo.SKIPPED){if(Gn(e))return e;if(Wr(e))return!1;throw Error("non exhaustive match")}})),a=Ve(r,(t=>{const e=t.LONGER_ALT;if(e)return I(e)?Ve(e,(t=>hi(r,t))):[hi(r,e)]})),c=Ve(r,(t=>t.PUSH_MODE)),u=Ve(r,(t=>Xe(t,"POP_MODE")))})),n("Line Terminator Handling",(()=>{const t=Xi(e.lineTerminatorCharacters);h=Ve(r,(t=>!1)),"onlyOffset"!==e.positionTracking&&(h=Ve(r,(e=>Xe(e,"LINE_BREAKS")?!!e.LINE_BREAKS:!1===Yi(e,t)&&Ui(t,e.PATTERN))))})),n("Misc Mapping #2",(()=>{l=Ve(r,zi),d=Ve(i,Vi),f=fi(r,((t,e)=>{const n=e.GROUP;return Gn(n)&&n!==mo.SKIPPED&&(t[n]=[]),t}),{}),p=Ve(i,((t,e)=>({pattern:i[e],longerAlt:a[e],canLineTerminator:h[e],isCustom:l[e],short:d[e],group:s[e],push:c[e],pop:u[e],tokenTypeIdx:o[e],tokenType:r[e]})))}));let T=!0,E=[];return e.safeMode||n("First Char Optimization",(()=>{E=fi(r,((t,n,r)=>{if("string"==typeof n.PATTERN){const e=Ji(n.PATTERN.charCodeAt(0));qi(t,e,p[r])}else if(I(n.START_CHARS_HINT)){let e;J(n.START_CHARS_HINT,(n=>{const i=Ji("string"==typeof n?n.charCodeAt(0):n);e!==i&&(e=i,qi(t,i,p[r]))}))}else if(ir(n.PATTERN))if(n.PATTERN.unicode)T=!1,e.ensureOptimizations&&Ii(`${Li}\tUnable to analyze < ${n.PATTERN.toString()} > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const i=xi(n.PATTERN,e.ensureOptimizations);Pt(i)&&(T=!1),J(i,(e=>{qi(t,e,p[r])}))}else e.ensureOptimizations&&Ii(`${Li}\tTokenType: <${n.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),T=!1;return t}),[])})),{emptyGroups:f,patternIdxToConfig:p,charCodeToPatternIdxToConfig:E,hasCustom:m,canBeOptimized:T}}(t,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:this.TRACE_INIT})})),this.patternIdxToConfig[n]=r.patternIdxToConfig,this.charCodeToPatternIdxToConfig[n]=r.charCodeToPatternIdxToConfig,this.emptyGroups=Jn({},this.emptyGroups,r.emptyGroups),this.hasCustom=r.hasCustom||this.hasCustom,this.canModeBeOptimized[n]=r.canBeOptimized}}))})),this.defaultMode=n.defaultMode,!Pt(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const t=Ve(this.lexerDefinitionErrors,(t=>t.message)).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+t)}J(this.lexerDefinitionWarning,(t=>{Ni(t.message)})),this.TRACE_INIT("Choosing sub-methods implementations",(()=>{if($i?(this.chopInput=Z,this.match=this.matchWithTest):(this.updateLastIndex=Or,this.match=this.matchWithExec),r&&(this.handleModes=Or),!1===this.trackStartLines&&(this.computeNewColumn=Z),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=Or),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)})),this.TRACE_INIT("Failed Optimization Warnings",(()=>{const t=fi(this.canModeBeOptimized,((t,e,n)=>(!1===e&&t.push(n),t)),[]);if(e.ensureOptimizations&&!Pt(t))throw Error(`Lexer Modes: < ${t.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)})),this.TRACE_INIT("clearRegExpParserCache",(()=>{Oi={}})),this.TRACE_INIT("toFastProperties",(()=>{xn(this)}))}))}tokenize(t,e=this.defaultMode){if(!Pt(this.lexerDefinitionErrors)){const t=Ve(this.lexerDefinitionErrors,(t=>t.message)).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+t)}return this.tokenizeInternal(t,e)}tokenizeInternal(t,e){let n,r,i,o,s,a,c,u,h,l,d,f,p,m,T;const E=t,g=E.length;let v=0,y=0;const A=this.hasCustom?0:Math.floor(t.length/10),R=new Array(A),N=[];let O=this.trackStartLines?1:void 0,_=this.trackStartLines?1:void 0;const S=function(t){const e={},n=q(t);return J(n,(n=>{const r=t[n];if(!I(r))throw Error("non exhaustive match");e[n]=[]})),e}(this.emptyGroups),k=this.trackStartLines,L=this.config.lineTerminatorsPattern;let x=0,C=[],b=[];const P=[],M=[];let w;function U(){return C}function D(t){const e=Ji(t),n=b[e];return void 0===n?M:n}Object.freeze(M);const F=t=>{if(1===P.length&&void 0===t.tokenType.PUSH_MODE){const e=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);N.push({offset:t.startOffset,line:t.startLine,column:t.startColumn,length:t.image.length,message:e})}else{P.pop();const t=to(P);C=this.patternIdxToConfig[t],b=this.charCodeToPatternIdxToConfig[t],x=C.length;const e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;w=b&&e?D:U}};function j(t){P.push(t),b=this.charCodeToPatternIdxToConfig[t],C=this.patternIdxToConfig[t],x=C.length,x=C.length;const e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;w=b&&e?D:U}let $;j.call(this,e);const B=this.config.recoveryEnabled;for(;v<g;){a=null;const e=E.charCodeAt(v),A=w(e),I=A.length;for(n=0;n<I;n++){$=A[n];const r=$.pattern;c=null;const h=$.short;if(!1!==h?e===h&&(a=r):!0===$.isCustom?(T=r.exec(E,v,R,S),null!==T?(a=T[0],void 0!==T.payload&&(c=T.payload)):a=null):(this.updateLastIndex(r,v),a=this.match(r,t,v)),null!==a){if(s=$.longerAlt,void 0!==s){const e=s.length;for(i=0;i<e;i++){const e=C[s[i]],n=e.pattern;if(u=null,!0===e.isCustom?(T=n.exec(E,v,R,S),null!==T?(o=T[0],void 0!==T.payload&&(u=T.payload)):o=null):(this.updateLastIndex(n,v),o=this.match(n,t,v)),o&&o.length>a.length){a=o,c=u,$=e;break}}}break}}if(null!==a){if(h=a.length,l=$.group,void 0!==l&&(d=$.tokenTypeIdx,f=this.createTokenInstance(a,v,d,$.tokenType,O,_,h),this.handlePayload(f,c),!1===l?y=this.addToken(R,y,f):S[l].push(f)),t=this.chopInput(t,h),v+=h,_=this.computeNewColumn(_,h),!0===k&&!0===$.canLineTerminator){let t,e,n=0;L.lastIndex=0;do{t=L.test(a),!0===t&&(e=L.lastIndex-1,n++)}while(!0===t);0!==n&&(O+=n,_=h-e,this.updateTokenEndLineColumnLocation(f,l,e,n,O,_,h))}this.handleModes($,F,j,f)}else{const e=v,n=O,i=_;let o=!1===B;for(;!1===o&&v<g;)for(t=this.chopInput(t,1),v++,r=0;r<x;r++){const e=C[r],n=e.pattern,i=e.short;if(!1!==i?E.charCodeAt(v)===i&&(o=!0):!0===e.isCustom?o=null!==n.exec(E,v,R,S):(this.updateLastIndex(n,v),o=null!==n.exec(t)),!0===o)break}if(p=v-e,m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(E,e,p,n,i),N.push({offset:e,line:n,column:i,length:p,message:m}),!1===B)break}}return this.hasCustom||(R.length=y),{tokens:R,groups:S,errors:N}}handleModes(t,e,n,r){if(!0===t.pop){const i=t.push;e(r),void 0!==i&&n.call(this,i)}else void 0!==t.push&&n.call(this,t.push)}chopInput(t,e){return t.substring(e)}updateLastIndex(t,e){t.lastIndex=e}updateTokenEndLineColumnLocation(t,e,n,r,i,o,s){let a,c;void 0!==e&&(a=n===s-1,c=a?-1:0,1===r&&!0===a||(t.endLine=i+c,t.endColumn=o-1-c))}computeNewColumn(t,e){return t+e}createOffsetOnlyToken(t,e,n,r){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:r}}createStartOnlyToken(t,e,n,r,i,o){return{image:t,startOffset:e,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}}createFullToken(t,e,n,r,i,o,s){return{image:t,startOffset:e,endOffset:e+s-1,startLine:i,endLine:i,startColumn:o,endColumn:o+s-1,tokenTypeIdx:n,tokenType:r}}addTokenUsingPush(t,e,n){return t.push(n),e}addTokenUsingMemberAccess(t,e,n){return t[e]=n,++e}handlePayloadNoCustom(t,e){}handlePayloadWithCustom(t,e){null!==e&&(t.payload=e)}matchWithTest(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null}matchWithExec(t,e){const n=t.exec(e);return null!==n?n[0]:null}}function To(t){return go(t)?t.LABEL:t.name}function Eo(t){return t.name}function go(t){return Gn(t.LABEL)&&""!==t.LABEL}mo.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",mo.NA=/NOT_APPLICABLE/;const vo="parent",yo="categories",Ao="label",Ro="group",Io="push_mode",No="pop_mode",Oo="longer_alt",_o="line_breaks",So="start_chars_hint";function ko(t){return function(t){const e=t.pattern,n={};if(n.name=t.name,Wr(e)||(n.PATTERN=e),Xe(t,vo))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return Xe(t,yo)&&(n.CATEGORIES=t[yo]),so([n]),Xe(t,Ao)&&(n.LABEL=t[Ao]),Xe(t,Ro)&&(n.GROUP=t[Ro]),Xe(t,No)&&(n.POP_MODE=t[No]),Xe(t,Io)&&(n.PUSH_MODE=t[Io]),Xe(t,Oo)&&(n.LONGER_ALT=t[Oo]),Xe(t,_o)&&(n.LINE_BREAKS=t[_o]),Xe(t,So)&&(n.START_CHARS_HINT=t[So]),n}(t)}const Lo=ko({name:"EOF",pattern:mo.NA});function xo(t,e,n,r,i,o,s,a){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:s,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function Co(t,e){return no(t,e)}so([Lo]);const bo={buildMismatchTokenMessage:({expected:t,actual:e,previous:n,ruleName:r})=>`Expecting ${go(t)?`--\x3e ${To(t)} <--`:`token of type --\x3e ${t.name} <--`} but found --\x3e '${e.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:t,ruleName:e})=>"Redundant input, expecting EOF but found: "+t.image,buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){const o="Expecting: ",s="\nbut found: '"+vi(e).image+"'";if(r)return o+r+s;{const e=fi(t,((t,e)=>t.concat(e)),[]),n=Ve(e,(t=>`[${Ve(t,(t=>To(t))).join(", ")}]`));return o+`one of these possible Token sequences:\n${Ve(n,((t,e)=>`  ${e+1}. ${t}`)).join("\n")}`+s}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){const i="Expecting: ",o="\nbut found: '"+vi(e).image+"'";return n?i+n+o:i+`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${Ve(t,(t=>`[${Ve(t,(t=>To(t))).join(",")}]`)).join(" ,")}>`+o}};Object.freeze(bo);const Po={buildRuleNotFoundError:(t,e)=>"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"},Mo={buildDuplicateFoundError(t,e){const n=t.name,r=vi(e),i=r.idx,o=$r(r),s=(a=r)instanceof mr?a.terminalType.name:a instanceof sr?a.nonTerminalName:"";var a;let c=`->${o}${i>0?i:""}<- ${s?`with argument: ->${s}<-`:""}\n                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,"\n"),c},buildNamespaceConflictError:t=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(t){const e=Ve(t.prefixPath,(t=>To(t))).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${n}> inside <${t.topLevelRule.name}> Rule,\n<${e}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(t){const e=Ve(t.prefixPath,(t=>To(t))).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,\n<${e}> may appears as a prefix path in all these alternatives.\n`;return r+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",r},buildEmptyRepetitionError(t){let e=$r(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:t=>"deprecated",buildEmptyAlternationError:t=>`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:t=>`An Alternation cannot have more than 256 alternatives:\n<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\n has ${t.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(t){const e=t.topLevelRule.name;return`Left Recursion found in grammar.\nrule: <${e}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${e} --\x3e ${Ve(t.leftRecursionPath,(t=>t.name)).concat([e]).join(" --\x3e ")}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:t=>"deprecated",buildDuplicateRuleNameError(t){let e;return e=t.topLevelRule instanceof ar?t.topLevelRule.name:t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};class wo{visit(t){const e=t;switch(e.constructor){case sr:return this.visitNonTerminal(e);case cr:return this.visitAlternative(e);case ur:return this.visitOption(e);case hr:return this.visitRepetitionMandatory(e);case lr:return this.visitRepetitionMandatoryWithSeparator(e);case fr:return this.visitRepetitionWithSeparator(e);case dr:return this.visitRepetition(e);case pr:return this.visitAlternation(e);case mr:return this.visitTerminal(e);case ar:return this.visitRule(e);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}}class Uo extends wo{constructor(t,e){super(),this.nameToTopRule=t,this.errMsgProvider=e,this.errors=[]}resolveRefs(){J(et(this.nameToTopRule),(t=>{this.currTopLevel=t,t.accept(this)}))}visitNonTerminal(t){const e=this.nameToTopRule[t.nonTerminalName];if(e)t.referencedRule=e;else{const e=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:e,type:ca.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}}const Do=function(t,e){return xr(Ve(t,e),1)},Fo=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r},jo=function(t,e,n,r){return Q(t,(function(t,i,o){e(r,t,n(t),o)})),r};var $o=Object.prototype.hasOwnProperty;const Bo=(Go=function(t,e,n){$o.call(t,n)?t[n].push(e):Qe(t,n,[e])},function(t,e){var n=I(t)?Fo:jo,r=Ko?Ko():{};return n(t,Go,We(e),r)});var Go,Ko;const Wo=function(t,e,n){var r=null==t?0:t.length;return r?(e=n||void 0===e?1:$n(e),Cn(t,0,(e=r-e)<0?0:e)):[]};class zo extends gr{constructor(t,e){super(),this.topProd=t,this.path=e,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Ln(this.path.ruleStack).reverse(),this.occurrenceStack=Ln(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,e=[]){this.found||super.walk(t,e)}walkProdRef(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){const r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}}updateExpectedNext(){Pt(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Vo extends zo{constructor(t,e){super(t,e),this.path=e,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,e,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){const t=e.concat(n),r=new cr({definition:t});this.possibleTokTypes=Br(r),this.found=!0}}}class Ho extends gr{constructor(t,e){super(),this.topRule=t,this.occurrence=e,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Yo extends Ho{walkMany(t,e,n){if(t.idx===this.occurrence){const t=vi(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof mr&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkMany(t,e,n)}}class Xo extends Ho{walkManySep(t,e,n){if(t.idx===this.occurrence){const t=vi(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof mr&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkManySep(t,e,n)}}class qo extends Ho{walkAtLeastOne(t,e,n){if(t.idx===this.occurrence){const t=vi(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof mr&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOne(t,e,n)}}class Qo extends Ho{walkAtLeastOneSep(t,e,n){if(t.idx===this.occurrence){const t=vi(e.concat(n));this.result.isEndOfRule=void 0===t,t instanceof mr&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOneSep(t,e,n)}}function Zo(t,e,n=[]){n=Ln(n);let r=[],i=0;function o(o){const s=Zo(o.concat(Bn(t,i+1)),e,n);return r.concat(s)}for(;n.length<e&&i<t.length;){const e=t[i];if(e instanceof cr)return o(e.definition);if(e instanceof sr)return o(e.definition);if(e instanceof ur)r=o(e.definition);else{if(e instanceof hr)return o(e.definition.concat([new dr({definition:e.definition})]));if(e instanceof lr)return o([new cr({definition:e.definition}),new dr({definition:[new mr({terminalType:e.separator})].concat(e.definition)})]);if(e instanceof fr){const t=e.definition.concat([new dr({definition:[new mr({terminalType:e.separator})].concat(e.definition)})]);r=o(t)}else if(e instanceof dr){const t=e.definition.concat([new dr({definition:e.definition})]);r=o(t)}else{if(e instanceof pr)return J(e.definition,(t=>{!1===Pt(t.definition)&&(r=o(t.definition))})),r;if(!(e instanceof mr))throw Error("non exhaustive match");n.push(e.terminalType)}}i++}return r.push({partialPath:n,suffixDef:Bn(t,i)}),r}function Jo(t,e,n,r){const i="EXIT_NONE_TERMINAL",o=[i],s="EXIT_ALTERNATIVE";let a=!1;const c=e.length,u=c-r-1,h=[],l=[];for(l.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!Pt(l);){const t=l.pop();if(t===s){a&&to(l).idx<=u&&l.pop();continue}const r=t.def,d=t.idx,f=t.ruleStack,p=t.occurrenceStack;if(Pt(r))continue;const m=r[0];if(m===i){const t={idx:d,def:Bn(r),ruleStack:Wo(f),occurrenceStack:Wo(p)};l.push(t)}else if(m instanceof mr)if(d<c-1){const t=d+1;if(n(e[t],m.terminalType)){const e={idx:t,def:Bn(r),ruleStack:f,occurrenceStack:p};l.push(e)}}else{if(d!==c-1)throw Error("non exhaustive match");h.push({nextTokenType:m.terminalType,nextTokenOccurrence:m.idx,ruleStack:f,occurrenceStack:p}),a=!0}else if(m instanceof sr){const t=Ln(f);t.push(m.nonTerminalName);const e=Ln(p);e.push(m.idx);const n={idx:d,def:m.definition.concat(o,Bn(r)),ruleStack:t,occurrenceStack:e};l.push(n)}else if(m instanceof ur){const t={idx:d,def:Bn(r),ruleStack:f,occurrenceStack:p};l.push(t),l.push(s);const e={idx:d,def:m.definition.concat(Bn(r)),ruleStack:f,occurrenceStack:p};l.push(e)}else if(m instanceof hr){const t=new dr({definition:m.definition,idx:m.idx}),e={idx:d,def:m.definition.concat([t],Bn(r)),ruleStack:f,occurrenceStack:p};l.push(e)}else if(m instanceof lr){const t=new mr({terminalType:m.separator}),e=new dr({definition:[t].concat(m.definition),idx:m.idx}),n={idx:d,def:m.definition.concat([e],Bn(r)),ruleStack:f,occurrenceStack:p};l.push(n)}else if(m instanceof fr){const t={idx:d,def:Bn(r),ruleStack:f,occurrenceStack:p};l.push(t),l.push(s);const e=new mr({terminalType:m.separator}),n=new dr({definition:[e].concat(m.definition),idx:m.idx}),i={idx:d,def:m.definition.concat([n],Bn(r)),ruleStack:f,occurrenceStack:p};l.push(i)}else if(m instanceof dr){const t={idx:d,def:Bn(r),ruleStack:f,occurrenceStack:p};l.push(t),l.push(s);const e=new dr({definition:m.definition,idx:m.idx}),n={idx:d,def:m.definition.concat([e],Bn(r)),ruleStack:f,occurrenceStack:p};l.push(n)}else if(m instanceof pr)for(let t=m.definition.length-1;t>=0;t--){const e={idx:d,def:m.definition[t].definition.concat(Bn(r)),ruleStack:f,occurrenceStack:p};l.push(e),l.push(s)}else if(m instanceof cr)l.push({idx:d,def:m.definition.concat(Bn(r)),ruleStack:f,occurrenceStack:p});else{if(!(m instanceof ar))throw Error("non exhaustive match");l.push(ts(m,d,f,p))}}return h}function ts(t,e,n,r){const i=Ln(n);i.push(t.name);const o=Ln(r);return o.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:o}}var es;function ns(t){if(t instanceof ur||"Option"===t)return es.OPTION;if(t instanceof dr||"Repetition"===t)return es.REPETITION;if(t instanceof hr||"RepetitionMandatory"===t)return es.REPETITION_MANDATORY;if(t instanceof lr||"RepetitionMandatoryWithSeparator"===t)return es.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof fr||"RepetitionWithSeparator"===t)return es.REPETITION_WITH_SEPARATOR;if(t instanceof pr||"Alternation"===t)return es.ALTERNATION;throw Error("non exhaustive match")}function rs(t){const{occurrence:e,rule:n,prodType:r,maxLookahead:i}=t,o=ns(r);return o===es.ALTERNATION?ds(e,n,i):fs(e,n,o,i)}function is(t,e,n,r){const i=t.length,o=Fr(t,(t=>Fr(t,(t=>1===t.length))));if(e)return function(e){const r=Ve(e,(t=>t.GATE));for(let e=0;e<i;e++){const i=t[e],o=i.length,s=r[e];if(void 0===s||!1!==s.call(this))t:for(let t=0;t<o;t++){const r=i[t],o=r.length;for(let t=0;t<o;t++){const e=this.LA(t+1);if(!1===n(e,r[t]))continue t}return e}}};if(o&&!r){const e=Ve(t,(t=>Cr(t))),n=fi(e,((t,e,n)=>(J(e,(e=>{Xe(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),J(e.categoryMatches,(e=>{Xe(t,e)||(t[e]=n)}))})),t)),{});return function(){const t=this.LA(1);return n[t.tokenTypeIdx]}}return function(){for(let e=0;e<i;e++){const r=t[e],i=r.length;t:for(let t=0;t<i;t++){const i=r[t],o=i.length;for(let t=0;t<o;t++){const e=this.LA(t+1);if(!1===n(e,i[t]))continue t}return e}}}}function os(t,e,n){const r=Fr(t,(t=>1===t.length)),i=t.length;if(r&&!n){const e=Cr(t);if(1===e.length&&Pt(e[0].categoryMatches)){const t=e[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}{const t=fi(e,((t,e,n)=>(t[e.tokenTypeIdx]=!0,J(e.categoryMatches,(e=>{t[e]=!0})),t)),[]);return function(){const e=this.LA(1);return!0===t[e.tokenTypeIdx]}}}return function(){t:for(let n=0;n<i;n++){const r=t[n],i=r.length;for(let t=0;t<i;t++){const n=this.LA(t+1);if(!1===e(n,r[t]))continue t}return!0}return!1}}!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(es||(es={}));class ss extends gr{constructor(t,e,n){super(),this.topProd=t,this.targetOccurrence=e,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,e,n,r){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)}walkOption(t,e,n){this.checkIsTarget(t,es.OPTION,e,n)||super.walkOption(t,e,n)}walkAtLeastOne(t,e,n){this.checkIsTarget(t,es.REPETITION_MANDATORY,e,n)||super.walkOption(t,e,n)}walkAtLeastOneSep(t,e,n){this.checkIsTarget(t,es.REPETITION_MANDATORY_WITH_SEPARATOR,e,n)||super.walkOption(t,e,n)}walkMany(t,e,n){this.checkIsTarget(t,es.REPETITION,e,n)||super.walkOption(t,e,n)}walkManySep(t,e,n){this.checkIsTarget(t,es.REPETITION_WITH_SEPARATOR,e,n)||super.walkOption(t,e,n)}}class as extends wo{constructor(t,e,n){super(),this.targetOccurrence=t,this.targetProdType=e,this.targetRef=n,this.result=[]}checkIsTarget(t,e){t.idx!==this.targetOccurrence||this.targetProdType!==e||void 0!==this.targetRef&&t!==this.targetRef||(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,es.OPTION)}visitRepetition(t){this.checkIsTarget(t,es.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,es.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,es.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,es.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,es.ALTERNATION)}}function cs(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function us(t){let e=[""];for(let n=0;n<t.length;n++){const r=t[n],i=[];for(let t=0;t<e.length;t++){const n=e[t];i.push(n+"_"+r.tokenTypeIdx);for(let t=0;t<r.categoryMatches.length;t++){const e="_"+r.categoryMatches[t];i.push(n+e)}}e=i}return e}function hs(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;const i=t[r];for(let t=0;t<e.length;t++)if(!0===i[e[t]])return!1}return!0}function ls(t,e){const n=Ve(t,(t=>Zo([t],1))),r=cs(n.length),i=Ve(n,(t=>{const e={};return J(t,(t=>{const n=us(t.partialPath);J(n,(t=>{e[t]=!0}))})),e}));let o=n;for(let t=1;t<=e;t++){const n=o;o=cs(n.length);for(let s=0;s<n.length;s++){const a=n[s];for(let n=0;n<a.length;n++){const c=a[n].partialPath,u=a[n].suffixDef,h=us(c);if(hs(i,h,s)||Pt(u)||c.length===e){const t=r[s];if(!1===ps(t,c)){t.push(c);for(let t=0;t<h.length;t++){const e=h[t];i[s][e]=!0}}}else{const e=Zo(u,t+1,c);o[s]=o[s].concat(e),J(e,(t=>{const e=us(t.partialPath);J(e,(t=>{i[s][t]=!0}))}))}}}}return r}function ds(t,e,n,r){const i=new as(t,es.ALTERNATION,r);return e.accept(i),ls(i.result,n)}function fs(t,e,n,r){const i=new as(t,n);e.accept(i);const o=i.result,s=new ss(e,t,n).startWalking();return ls([new cr({definition:o}),new cr({definition:s})],r)}function ps(t,e){t:for(let n=0;n<t.length;n++){const r=t[n];if(r.length===e.length){for(let t=0;t<r.length;t++){const n=e[t],i=r[t];if(!1==(n===i||void 0!==i.categoryMatchesMap[n.tokenTypeIdx]))continue t}return!0}}return!1}function ms(t){return Fr(t,(t=>Fr(t,(t=>Fr(t,(t=>Pt(t.categoryMatches)))))))}function Ts(t){return`${$r(t)}_#_${t.idx}_#_${Es(t)}`}function Es(t){return t instanceof mr?t.terminalType.name:t instanceof sr?t.nonTerminalName:""}class gs extends wo{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}}function vs(t,e,n,r=[]){const i=[],o=ys(e.definition);if(Pt(o))return[];{const e=t.name;wr(o,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:ca.LEFT_RECURSION,ruleName:e});const s=Ei(o,r.concat([t])),a=Do(s,(e=>{const i=Ln(r);return i.push(e),vs(t,e,n,i)}));return i.concat(a)}}function ys(t){let e=[];if(Pt(t))return e;const n=vi(t);if(n instanceof sr)e.push(n.referencedRule);else if(n instanceof cr||n instanceof ur||n instanceof hr||n instanceof lr||n instanceof fr||n instanceof dr)e=e.concat(ys(n.definition));else if(n instanceof pr)e=Cr(Ve(n.definition,(t=>ys(t.definition))));else if(!(n instanceof mr))throw Error("non exhaustive match");const r=jr(n),i=t.length>1;if(r&&i){const n=Bn(t);return e.concat(ys(n))}return e}class As extends wo{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}}class Rs extends wo{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}}const Is="MismatchedTokenException",Ns="NoViableAltException",Os="EarlyExitException",_s="NotAllInputParsedException",Ss=[Is,Ns,Os,_s];function ks(t){return wr(Ss,t.name)}Object.freeze(Ss);class Ls extends Error{constructor(t,e){super(t),this.token=e,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class xs extends Ls{constructor(t,e,n){super(t,e),this.previousToken=n,this.name=Is}}class Cs extends Ls{constructor(t,e,n){super(t,e),this.previousToken=n,this.name=Ns}}class bs extends Ls{constructor(t,e){super(t,e),this.name=_s}}class Ps extends Ls{constructor(t,e,n){super(t,e),this.previousToken=n,this.name=Os}}const Ms={},ws="InRuleRecoveryException";class Us extends Error{constructor(t){super(t),this.name=ws}}function Ds(t,e,n,r,i,o,s){const a=this.getKeyForAutomaticLookahead(r,i);let c=this.firstAfterRepMap[a];if(void 0===c){const t=this.getCurrRuleFullName();c=new o(this.getGAstProductions()[t],i).startWalking(),this.firstAfterRepMap[a]=c}let u=c.token,h=c.occurrence;const l=c.isEndOfRule;1===this.RULE_STACK.length&&l&&void 0===u&&(u=Lo,h=1),void 0!==u&&void 0!==h&&this.shouldInRepetitionRecoveryBeTried(u,h,s)&&this.tryInRepetitionRecovery(t,e,n,u)}const Fs=1024,js=1280,$s=1536;function Bs(t,e,n){return n|e|t}class Gs{constructor(t){var e;this.maxLookahead=null!==(e=null==t?void 0:t.maxLookahead)&&void 0!==e?e:sa.maxLookahead}validate(t){const e=this.validateNoLeftRecursion(t.rules);if(Pt(e)){const n=this.validateEmptyOrAlternatives(t.rules),r=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),i=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...e,...n,...r,...i]}return e}validateNoLeftRecursion(t){return Do(t,(t=>vs(t,t,Mo)))}validateEmptyOrAlternatives(t){return Do(t,(t=>function(t,e){const n=new As;t.accept(n);const r=n.alternations;return Do(r,(n=>{const r=Wo(n.definition);return Do(r,((r,i)=>{const o=Jo([r],[],no,1);return Pt(o)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:n,emptyChoiceIdx:i}),type:ca.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:n.idx,alternative:i+1}]:[]}))}))}(t,Mo)))}validateAmbiguousAlternationAlternatives(t,e){return Do(t,(t=>function(t,e,n){const r=new As;t.accept(r);let i=r.alternations;i=ci(i,(t=>!0===t.ignoreAmbiguities));const o=Do(i,(r=>{const i=r.idx,o=r.maxLookahead||e,s=ds(i,t,o,r),a=function(t,e,n,r){const i=[],o=fi(t,((n,r,o)=>(!0===e.definition[o].ignoreAmbiguities||J(r,(r=>{const s=[o];J(t,((t,n)=>{o!==n&&ps(t,r)&&!0!==e.definition[n].ignoreAmbiguities&&s.push(n)})),s.length>1&&!ps(i,r)&&(i.push(r),n.push({alts:s,path:r}))})),n)),[]);return Ve(o,(t=>{const i=Ve(t.alts,(t=>t+1));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:ca.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:t.alts}}))}(s,r,t,n),c=function(t,e,n,r){const i=fi(t,((t,e,n)=>{const r=Ve(e,(t=>({idx:n,path:t})));return t.concat(r)}),[]);return gi(Do(i,(t=>{if(!0===e.definition[t.idx].ignoreAmbiguities)return[];const o=t.idx,s=t.path,a=pi(i,(t=>{return!0!==e.definition[t.idx].ignoreAmbiguities&&t.idx<o&&(n=t.path,r=s,n.length<r.length&&Fr(n,((t,e)=>{const n=r[e];return t===n||n.categoryMatchesMap[t.tokenTypeIdx]})));var n,r}));return Ve(a,(t=>{const i=[t.idx+1,o+1],s=0===e.idx?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:ca.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:s,alternatives:i}}))})))}(s,r,t,n);return a.concat(c)}));return o}(t,e,Mo)))}validateSomeNonEmptyLookaheadPath(t,e){return function(t,e,n){const r=[];return J(t,(t=>{const i=new Rs;t.accept(i);const o=i.allProductions;J(o,(i=>{const o=ns(i),s=i.maxLookahead||e,a=fs(i.idx,t,o,s)[0];if(Pt(Cr(a))){const e=n.buildEmptyRepetitionError({topLevelRule:t,repetition:i});r.push({message:e,type:ca.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}}))})),r}(t,e,Mo)}buildLookaheadForAlternation(t){return function(t,e,n,r,i,o){const s=ds(t,e,n);return o(s,r,ms(s)?ro:no,i)}(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,is)}buildLookaheadForOptional(t){return function(t,e,n,r,i,o){const s=fs(t,e,i,n),a=ms(s)?ro:no;return o(s[0],a,r)}(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,ns(t.prodType),os)}}const Ks=new class extends wo{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}};function Ws(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset)}function zs(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}const Vs="name";function Hs(t,e){Object.defineProperty(t,Vs,{enumerable:!1,configurable:!0,writable:!1,value:e})}function Ys(t,e){const n=q(t),r=n.length;for(let i=0;i<r;i++){const r=t[n[i]],o=r.length;for(let t=0;t<o;t++){const n=r[t];void 0===n.tokenTypeIdx&&this[n.name](n.children,e)}}}var Xs;!function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"}(Xs||(Xs={}));const qs={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(qs);const Qs=Math.pow(2,8)-1,Zs=ko({name:"RECORDING_PHASE_TOKEN",pattern:mo.NA});so([Zs]);const Js=xo(Zs,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(Js);const ta={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}};function ea(t,e,n,r=!1){ia(n);const i=to(this.recordingProdStack),o=Y(e)?e:e.DEF,s=new t({definition:[],idx:n});return r&&(s.separator=e.SEP),Xe(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),o.call(this),i.definition.push(s),this.recordingProdStack.pop(),qs}function na(t,e){ia(e);const n=to(this.recordingProdStack),r=!1===I(t),i=!1===r?t:t.DEF,o=new pr({definition:[],idx:e,ignoreAmbiguities:r&&!0===t.IGNORE_AMBIGUITIES});Xe(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD);const s=Pr(i,(t=>Y(t.GATE)));return o.hasPredicates=s,n.definition.push(o),J(i,(t=>{const e=new cr({definition:[]});o.definition.push(e),Xe(t,"IGNORE_AMBIGUITIES")?e.ignoreAmbiguities=t.IGNORE_AMBIGUITIES:Xe(t,"GATE")&&(e.ignoreAmbiguities=!0),this.recordingProdStack.push(e),t.ALT.call(this),this.recordingProdStack.pop()})),qs}function ra(t){return 0===t?"":`${t}`}function ia(t){if(t<0||t>Qs){const e=new Error(`Invalid DSL Method idx value: <${t}>\n\tIdx value must be a none negative value smaller than ${Qs+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}const oa=xo(Lo,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(oa);const sa=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:bo,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),aa=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ca,ua;function ha(t=void 0){return function(){return t}}!function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"}(ca||(ca={}));class la{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",(()=>{let t;this.selfAnalysisDone=!0;const e=this.className;this.TRACE_INIT("toFastProps",(()=>{xn(this)})),this.TRACE_INIT("Grammar Recording",(()=>{try{this.enableRecording(),J(this.definedRulesNames,(t=>{const e=this[t].originalGrammarAction;let n;this.TRACE_INIT(`${t} Rule`,(()=>{n=this.topLevelRuleRecord(t,e)})),this.gastProductionsCache[t]=n}))}finally{this.disableRecording()}}));let n=[];if(this.TRACE_INIT("Grammar Resolving",(()=>{n=function(t){const e=si(t,{errMsgProvider:Po}),n={};return J(t.rules,(t=>{n[t.name]=t})),function(t,e){const n=new Uo(t,e);return n.resolveRefs(),n.errors}(n,e.errMsgProvider)}({rules:et(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)})),this.TRACE_INIT("Grammar Validations",(()=>{if(Pt(n)&&!1===this.skipValidations){const n=(t={rules:et(this.gastProductionsCache),tokenTypes:et(this.tokensMap),errMsgProvider:Mo,grammarName:e},function(t,e,n,r){const i=Do(t,(t=>function(t,e){const n=new gs;t.accept(n);const r=n.allProductions,i=Bo(r,Ts),o=nr(i,(t=>t.length>1));return Ve(et(o),(n=>{const r=vi(n),i=e.buildDuplicateFoundError(t,n),o=$r(r),s={message:i,type:ca.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:o,occurrence:r.idx},a=Es(r);return a&&(s.parameter=a),s}))}(t,n))),o=function(t,e,n){const r=[],i=Ve(e,(t=>t.name));return J(t,(t=>{const e=t.name;if(wr(i,e)){const i=n.buildNamespaceConflictError(t);r.push({message:i,type:ca.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}})),r}(t,e,n),s=Do(t,(t=>function(t,e){const n=new As;t.accept(n);const r=n.alternations;return Do(r,(n=>n.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:n}),type:ca.TOO_MANY_ALTS,ruleName:t.name,occurrence:n.idx}]:[]))}(t,n))),a=Do(t,(e=>function(t,e,n,r){const i=[],o=fi(e,((e,n)=>n.name===t.name?e+1:e),0);if(o>1){const e=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:e,type:ca.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}(e,t,r,n)));return i.concat(o,s,a)}((t=si(t,{errMsgProvider:Mo})).rules,t.tokenTypes,t.errMsgProvider,t.grammarName)),r=function(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return Ve(e,(t=>Object.assign({type:ca.CUSTOM_LOOKAHEAD_VALIDATION},t)))}({lookaheadStrategy:this.lookaheadStrategy,rules:et(this.gastProductionsCache),tokenTypes:et(this.tokensMap),grammarName:e});this.definitionErrors=this.definitionErrors.concat(n,r)}var t})),Pt(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",(()=>{const t=function(t){const e={};return J(t,(t=>{const n=new Kr(t).startWalking();Jn(e,n)})),e}(et(this.gastProductionsCache));this.resyncFollows=t})),this.TRACE_INIT("ComputeLookaheadFunctions",(()=>{var t,e;null===(e=(t=this.lookaheadStrategy).initialize)||void 0===e||e.call(t,{rules:et(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(et(this.gastProductionsCache))}))),!la.DEFER_DEFINITION_ERRORS_HANDLING&&!Pt(this.definitionErrors))throw t=Ve(this.definitionErrors,(t=>t.message)),new Error(`Parser Definition Errors detected:\n ${t.join("\n-------------------------------\n")}`)}))}constructor(t,e){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(e),n.initLexerAdapter(),n.initLooksAhead(e),n.initRecognizerEngine(t,e),n.initRecoverable(e),n.initTreeBuilder(e),n.initContentAssist(),n.initGastRecorder(e),n.initPerformanceTracer(e),Xe(e,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=Xe(e,"skipValidations")?e.skipValidations:sa.skipValidations}}la.DEFER_DEFINITION_ERRORS_HANDLING=!1,ua=la,[class{initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Xe(t,"recoveryEnabled")?t.recoveryEnabled:sa.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Ds)}getTokenToInsert(t){const e=xo(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,e,n,r){const i=this.findReSyncTokenType(),o=this.exportLexerState(),s=[];let a=!1;const c=this.LA(1);let u=this.LA(1);const h=()=>{const t=this.LA(0),e=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:c,previous:t,ruleName:this.getCurrRuleFullName()}),n=new xs(e,c,this.LA(0));n.resyncedTokens=Wo(s),this.SAVE_ERROR(n)};for(;!a;){if(this.tokenMatcher(u,r))return void h();if(n.call(this))return h(),void t.apply(this,e);this.tokenMatcher(u,i)?a=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,s))}this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(t,e,n){return!1!==n&&!this.tokenMatcher(this.LA(1),t)&&!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))}getFollowsForInRuleRecovery(t,e){const n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){const t=this.SKIP_TOKEN();return this.consumeToken(),t}throw new Us("sad sad panda")}canPerformInRuleRecovery(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,e){if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if(Pt(e))return!1;const n=this.LA(1);return void 0!==Ai(e,(t=>this.tokenMatcher(n,t)))}canRecoverWithSingleTokenDeletion(t){return!!this.canTokenTypeBeDeletedInRecovery(t)&&this.tokenMatcher(this.LA(2),t)}isInCurrentRuleReSyncSet(t){const e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return wr(n,t)}findReSyncTokenType(){const t=this.flattenFollowSet();let e=this.LA(1),n=2;for(;;){const r=Ai(t,(t=>Co(e,t)));if(void 0!==r)return r;e=this.LA(n),n++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return Ms;const t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const t=this.RULE_STACK,e=this.RULE_OCCURRENCE_STACK;return Ve(t,((n,r)=>0===r?Ms:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:e[r],inRule:this.shortRuleNameToFullName(t[r-1])}))}flattenFollowSet(){const t=Ve(this.buildFullFollowKeyStack(),(t=>this.getFollowSetFromFollowKey(t)));return Cr(t)}getFollowSetFromFollowKey(t){if(t===Ms)return[Lo];const e=t.ruleName+t.idxInCallingRule+Gr+t.inRule;return this.resyncFollows[e]}addToResyncTokens(t,e){return this.tokenMatcher(t,Lo)||e.push(t),e}reSyncTo(t){const e=[];let n=this.LA(1);for(;!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return Wo(e)}attemptInRepetitionRecovery(t,e,n,r,i,o,s){}getCurrentGrammarPath(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:Ln(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}}getHumanReadableRuleStack(){return Ve(this.RULE_STACK,(t=>this.shortRuleNameToFullName(t)))}},class{initLooksAhead(t){this.dynamicTokensEnabled=Xe(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:sa.dynamicTokensEnabled,this.maxLookahead=Xe(t,"maxLookahead")?t.maxLookahead:sa.maxLookahead,this.lookaheadStrategy=Xe(t,"lookaheadStrategy")?t.lookaheadStrategy:new Gs({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){J(t,(t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,(()=>{const{alternation:e,repetition:n,option:r,repetitionMandatory:i,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:s}=function(t){Ks.reset(),t.accept(Ks);const e=Ks.dslMethods;return Ks.reset(),e}(t);J(e,(e=>{const n=0===e.idx?"":e.idx;this.TRACE_INIT(`${$r(e)}${n}`,(()=>{const n=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:e.idx,rule:t,maxLookahead:e.maxLookahead||this.maxLookahead,hasPredicates:e.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),r=Bs(this.fullRuleNameToShort[t.name],256,e.idx);this.setLaFuncCache(r,n)}))})),J(n,(e=>{this.computeLookaheadFunc(t,e.idx,768,"Repetition",e.maxLookahead,$r(e))})),J(r,(e=>{this.computeLookaheadFunc(t,e.idx,512,"Option",e.maxLookahead,$r(e))})),J(i,(e=>{this.computeLookaheadFunc(t,e.idx,Fs,"RepetitionMandatory",e.maxLookahead,$r(e))})),J(o,(e=>{this.computeLookaheadFunc(t,e.idx,$s,"RepetitionMandatoryWithSeparator",e.maxLookahead,$r(e))})),J(s,(e=>{this.computeLookaheadFunc(t,e.idx,js,"RepetitionWithSeparator",e.maxLookahead,$r(e))}))}))}))}computeLookaheadFunc(t,e,n,r,i,o){this.TRACE_INIT(`${o}${0===e?"":e}`,(()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:e,rule:t,maxLookahead:i||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),s=Bs(this.fullRuleNameToShort[t.name],n,e);this.setLaFuncCache(s,o)}))}getKeyForAutomaticLookahead(t,e){return Bs(this.getLastExplicitRuleShortName(),t,e)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,e){this.lookAheadFuncsCache.set(t,e)}},class{initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=Xe(t,"nodeLocationTracking")?t.nodeLocationTracking:sa.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=zs,this.setNodeLocationFromNode=zs,this.cstPostRule=Or,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Or,this.setNodeLocationFromNode=Or,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Ws,this.setNodeLocationFromNode=Ws,this.cstPostRule=Or,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Or,this.setNodeLocationFromNode=Or,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`);this.setNodeLocationFromToken=Or,this.setNodeLocationFromNode=Or,this.cstPostRule=Or,this.setInitialNodeLocation=Or}else this.cstInvocationStateUpdate=Or,this.cstFinallyStateUpdate=Or,this.cstPostTerminal=Or,this.cstPostNonTerminal=Or,this.cstPostRule=Or}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){const e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){const e={name:t,children:Object.create(null)};this.setInitialNodeLocation(e),this.CST_STACK.push(e)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){const e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?(n.endOffset=e.endOffset,n.endLine=e.endLine,n.endColumn=e.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(t){const e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?n.endOffset=e.endOffset:n.startOffset=NaN}cstPostTerminal(t,e){const n=this.CST_STACK[this.CST_STACK.length-1];var r,i,o;i=e,o=t,void 0===(r=n).children[o]?r.children[o]=[i]:r.children[o].push(i),this.setNodeLocationFromToken(n.location,e)}cstPostNonTerminal(t,e){const n=this.CST_STACK[this.CST_STACK.length-1];!function(t,e,n){void 0===t.children[e]?t.children[e]=[n]:t.children[e].push(n)}(n,e,t),this.setNodeLocationFromNode(n.location,t.location)}getBaseCstVisitorConstructor(){if(Wr(this.baseCstVisitorConstructor)){const t=function(t,e){const n=function(){};Hs(n,t+"BaseSemantics");const r={visit:function(t,e){if(I(t)&&(t=t[0]),!Wr(t))return this[t.name](t.children,e)},validateVisitor:function(){const t=function(t,e){const n=function(t,e){const n=pi(e,(e=>!1===Y(t[e]))),r=Ve(n,(e=>({msg:`Missing visitor method: <${e}> on ${t.constructor.name} CST Visitor.`,type:Xs.MISSING_METHOD,methodName:e})));return gi(r)}(t,e);return n}(this,e);if(!Pt(t)){const e=Ve(t,(t=>t.msg));throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${e.join("\n\n").replace(/\n/g,"\n\t")}`)}}};return(n.prototype=r).constructor=n,n._RULE_NAMES=e,n}(this.className,q(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Wr(this.baseCstVisitorWithDefaultsConstructor)){const t=function(t,e,n){const r=function(){};Hs(r,t+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return J(e,(t=>{i[t]=Ys})),(r.prototype=i).constructor=r,r}(this.className,q(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){const t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){const t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}},class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):oa}LA(t){const e=this.currIdx+t;return e<0||this.tokVectorLength<=e?oa:this.tokVector[e]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},class{initRecognizerEngine(t,e){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=ro,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Xe(e,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(I(t)){if(Pt(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(I(t))this.tokensMap=fi(t,((t,e)=>(t[e.name]=e,t)),{});else if(Xe(t,"modes")&&Fr(Cr(et(t.modes)),ho)){const e=Cr(et(t.modes)),n=Sr(e);this.tokensMap=fi(n,((t,e)=>(t[e.name]=e,t)),{})}else{if(!H(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=Ln(t)}this.tokensMap.EOF=Lo;const n=Xe(t,"modes")?Cr(et(t.modes)):et(t),r=Fr(n,(t=>Pt(t.categoryMatches)));this.tokenMatcher=r?ro:no,so(et(this.tokensMap))}defineRule(t,e,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const r=Xe(n,"resyncEnabled")?n.resyncEnabled:aa.resyncEnabled,i=Xe(n,"recoveryValueFunc")?n.recoveryValueFunc:aa.recoveryValueFunc,o=this.ruleShortNameIdx<<12;let s;return this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=t,this.fullRuleNameToShort[t]=o,s=!0===this.outputCst?function(...n){try{this.ruleInvocationStateUpdate(o,t,this.subruleIdx),e.apply(this,n);const r=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(r),r}catch(t){return this.invokeRuleCatch(t,r,i)}finally{this.ruleFinallyStateUpdate()}}:function(...n){try{return this.ruleInvocationStateUpdate(o,t,this.subruleIdx),e.apply(this,n)}catch(t){return this.invokeRuleCatch(t,r,i)}finally{this.ruleFinallyStateUpdate()}},Object.assign(s,{ruleName:t,originalGrammarAction:e})}invokeRuleCatch(t,e,n){const r=1===this.RULE_STACK.length,i=e&&!this.isBackTracking()&&this.recoveryEnabled;if(ks(t)){const e=t;if(i){const r=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(r)){if(e.resyncedTokens=this.reSyncTo(r),this.outputCst){const t=this.CST_STACK[this.CST_STACK.length-1];return t.recoveredNode=!0,t}return n(t)}if(this.outputCst){const t=this.CST_STACK[this.CST_STACK.length-1];t.recoveredNode=!0,e.partialCstResult=t}throw e}if(r)return this.moveToTerminatedState(),n(t);throw e}throw t}optionInternal(t,e){const n=this.getKeyForAutomaticLookahead(512,e);return this.optionInternalLogic(t,e,n)}optionInternalLogic(t,e,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof t){r=t.DEF;const e=t.GATE;if(void 0!==e){const t=i;i=()=>e.call(this)&&t.call(this)}}else r=t;if(!0===i.call(this))return r.call(this)}atLeastOneInternal(t,e){const n=this.getKeyForAutomaticLookahead(Fs,t);return this.atLeastOneInternalLogic(t,e,n)}atLeastOneInternalLogic(t,e,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof e){r=e.DEF;const t=e.GATE;if(void 0!==t){const e=i;i=()=>t.call(this)&&e.call(this)}}else r=e;if(!0!==i.call(this))throw this.raiseEarlyExitException(t,es.REPETITION_MANDATORY,e.ERR_MSG);{let t=this.doSingleRepetition(r);for(;!0===i.call(this)&&!0===t;)t=this.doSingleRepetition(r)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],i,Fs,t,qo)}atLeastOneSepFirstInternal(t,e){const n=this.getKeyForAutomaticLookahead($s,t);this.atLeastOneSepFirstInternalLogic(t,e,n)}atLeastOneSepFirstInternalLogic(t,e,n){const r=e.DEF,i=e.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(t,es.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);{r.call(this);const e=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,e,r,Qo],e,$s,t,Qo)}}manyInternal(t,e){const n=this.getKeyForAutomaticLookahead(768,t);return this.manyInternalLogic(t,e,n)}manyInternalLogic(t,e,n){let r,i=this.getLaFuncFromCache(n);if("function"!=typeof e){r=e.DEF;const t=e.GATE;if(void 0!==t){const e=i;i=()=>t.call(this)&&e.call(this)}}else r=e;let o=!0;for(;!0===i.call(this)&&!0===o;)o=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],i,768,t,Yo,o)}manySepFirstInternal(t,e){const n=this.getKeyForAutomaticLookahead(js,t);this.manySepFirstInternalLogic(t,e,n)}manySepFirstInternalLogic(t,e,n){const r=e.DEF,i=e.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){r.call(this);const e=()=>this.tokenMatcher(this.LA(1),i);for(;!0===this.tokenMatcher(this.LA(1),i);)this.CONSUME(i),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,i,e,r,Xo],e,js,t,Xo)}}repetitionSepSecondInternal(t,e,n,r,i){for(;n();)this.CONSUME(e),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,i],n,$s,t,i)}doSingleRepetition(t){const e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e}orInternal(t,e){const n=this.getKeyForAutomaticLookahead(256,e),r=I(t)?t:t.DEF,i=this.getLaFuncFromCache(n).call(this,r);if(void 0!==i)return r[i].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){const t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new bs(e,t))}}subruleInternal(t,e,n){let r;try{const i=void 0!==n?n.ARGS:void 0;return this.subruleIdx=e,r=t.apply(this,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),r}catch(e){throw this.subruleInternalError(e,n,t.ruleName)}}subruleInternalError(t,e,n){throw ks(t)&&void 0!==t.partialCstResult&&(this.cstPostNonTerminal(t.partialCstResult,void 0!==e&&void 0!==e.LABEL?e.LABEL:n),delete t.partialCstResult),t}consumeInternal(t,e,n){let r;try{const e=this.LA(1);!0===this.tokenMatcher(e,t)?(this.consumeToken(),r=e):this.consumeInternalError(t,e,n)}catch(n){r=this.consumeInternalRecovery(t,e,n)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:t.name,r),r}consumeInternalError(t,e,n){let r;const i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new xs(r,e,i))}consumeInternalRecovery(t,e,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;{const r=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,r)}catch(t){throw t.name===ws?n:t}}}saveRecogState(){const t=this.errors,e=Ln(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){const t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Lo)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},class{ACTION(t){return t.call(this)}consume(t,e,n){return this.consumeInternal(e,t,n)}subrule(t,e,n){return this.subruleInternal(e,t,n)}option(t,e){return this.optionInternal(e,t)}or(t,e){return this.orInternal(e,t)}many(t,e){return this.manyInternal(t,e)}atLeastOne(t,e){return this.atLeastOneInternal(t,e)}CONSUME(t,e){return this.consumeInternal(t,0,e)}CONSUME1(t,e){return this.consumeInternal(t,1,e)}CONSUME2(t,e){return this.consumeInternal(t,2,e)}CONSUME3(t,e){return this.consumeInternal(t,3,e)}CONSUME4(t,e){return this.consumeInternal(t,4,e)}CONSUME5(t,e){return this.consumeInternal(t,5,e)}CONSUME6(t,e){return this.consumeInternal(t,6,e)}CONSUME7(t,e){return this.consumeInternal(t,7,e)}CONSUME8(t,e){return this.consumeInternal(t,8,e)}CONSUME9(t,e){return this.consumeInternal(t,9,e)}SUBRULE(t,e){return this.subruleInternal(t,0,e)}SUBRULE1(t,e){return this.subruleInternal(t,1,e)}SUBRULE2(t,e){return this.subruleInternal(t,2,e)}SUBRULE3(t,e){return this.subruleInternal(t,3,e)}SUBRULE4(t,e){return this.subruleInternal(t,4,e)}SUBRULE5(t,e){return this.subruleInternal(t,5,e)}SUBRULE6(t,e){return this.subruleInternal(t,6,e)}SUBRULE7(t,e){return this.subruleInternal(t,7,e)}SUBRULE8(t,e){return this.subruleInternal(t,8,e)}SUBRULE9(t,e){return this.subruleInternal(t,9,e)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,e,n=aa){if(wr(this.definedRulesNames,t)){const e={message:Mo.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:ca.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(e)}this.definedRulesNames.push(t);const r=this.defineRule(t,e,n);return this[t]=r,r}OVERRIDE_RULE(t,e,n=aa){const r=function(t,e,n){const r=[];let i;return wr(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:ca.INVALID_RULE_OVERRIDE,ruleName:t})),r}(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);const i=this.defineRule(t,e,n);return this[t]=i,i}BACKTRACK(t,e){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(ks(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Tr(et(this.gastProductionsCache))}},class{initErrorHandler(t){this._errors=[],this.errorMessageProvider=Xe(t,"errorMessageProvider")?t.errorMessageProvider:sa.errorMessageProvider}SAVE_ERROR(t){if(ks(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Ln(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Ln(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,e,n){const r=this.getCurrRuleFullName(),i=fs(t,this.getGAstProductions()[r],e,this.maxLookahead)[0],o=[];for(let t=1;t<=this.maxLookahead;t++)o.push(this.LA(t));const s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:o,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new Ps(s,this.LA(1),this.LA(0)))}raiseNoAltException(t,e){const n=this.getCurrRuleFullName(),r=ds(t,this.getGAstProductions()[n],this.maxLookahead),i=[];for(let t=1;t<=this.maxLookahead;t++)i.push(this.LA(t));const o=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:i,previous:o,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Cs(s,this.LA(1),o))}},class{initContentAssist(){}computeContentAssist(t,e){const n=this.gastProductionsCache[t];if(Wr(n))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return Jo([n],e,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){const e=vi(t.ruleStack),n=this.getGAstProductions()[e];return new Vo(n,t).startWalking()}},class{initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(()=>{for(let t=0;t<10;t++){const e=t>0?t:"";this[`CONSUME${e}`]=function(e,n){return this.consumeInternalRecord(e,t,n)},this[`SUBRULE${e}`]=function(e,n){return this.subruleInternalRecord(e,t,n)},this[`OPTION${e}`]=function(e){return this.optionInternalRecord(e,t)},this[`OR${e}`]=function(e){return this.orInternalRecord(e,t)},this[`MANY${e}`]=function(e){this.manyInternalRecord(t,e)},this[`MANY_SEP${e}`]=function(e){this.manySepFirstInternalRecord(t,e)},this[`AT_LEAST_ONE${e}`]=function(e){this.atLeastOneInternalRecord(t,e)},this[`AT_LEAST_ONE_SEP${e}`]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}}this.consume=function(t,e,n){return this.consumeInternalRecord(e,t,n)},this.subrule=function(t,e,n){return this.subruleInternalRecord(e,t,n)},this.option=function(t,e){return this.optionInternalRecord(e,t)},this.or=function(t,e){return this.orInternalRecord(e,t)},this.many=function(t,e){this.manyInternalRecord(t,e)},this.atLeastOne=function(t,e){this.atLeastOneInternalRecord(t,e)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD}))}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(()=>{const t=this;for(let e=0;e<10;e++){const n=e>0?e:"";delete t[`CONSUME${n}`],delete t[`SUBRULE${n}`],delete t[`OPTION${n}`],delete t[`OR${n}`],delete t[`MANY${n}`],delete t[`MANY_SEP${n}`],delete t[`AT_LEAST_ONE${n}`],delete t[`AT_LEAST_ONE_SEP${n}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))}ACTION_RECORD(t){}BACKTRACK_RECORD(t,e){return()=>!0}LA_RECORD(t){return oa}topLevelRuleRecord(t,e){try{const n=new ar({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),e.call(this),this.recordingProdStack.pop(),n}catch(t){if(!0!==t.KNOWN_RECORDER_ERROR)try{t.message=t.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch(e){throw t}throw t}}optionInternalRecord(t,e){return ea.call(this,ur,t,e)}atLeastOneInternalRecord(t,e){ea.call(this,hr,e,t)}atLeastOneSepFirstInternalRecord(t,e){ea.call(this,lr,e,t,!0)}manyInternalRecord(t,e){ea.call(this,dr,e,t)}manySepFirstInternalRecord(t,e){ea.call(this,fr,e,t,!0)}orInternalRecord(t,e){return na.call(this,t,e)}subruleInternalRecord(t,e,n){if(ia(e),!t||!1===Xe(t,"ruleName")){const n=new Error(`<SUBRULE${ra(e)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw n.KNOWN_RECORDER_ERROR=!0,n}const r=to(this.recordingProdStack),i=t.ruleName,o=new sr({idx:e,nonTerminalName:i,label:null==n?void 0:n.LABEL,referencedRule:void 0});return r.definition.push(o),this.outputCst?ta:qs}consumeInternalRecord(t,e,n){if(ia(e),!co(t)){const n=new Error(`<CONSUME${ra(e)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw n.KNOWN_RECORDER_ERROR=!0,n}const r=to(this.recordingProdStack),i=new mr({idx:e,terminalType:t,label:null==n?void 0:n.LABEL});return r.definition.push(i),Js}},class{initPerformanceTracer(t){if(Xe(t,"traceInitPerf")){const e=t.traceInitPerf,n="number"==typeof e;this.traceInitMaxIdent=n?e:1/0,this.traceInitPerf=n?e>0:e}else this.traceInitMaxIdent=0,this.traceInitPerf=sa.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--\x3e <${t}>`);const{time:r,value:i}=eo(e),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${t}> time: ${r}ms`),this.traceInitIndent--,i}return e()}}].forEach((t=>{const e=t.prototype;Object.getOwnPropertyNames(e).forEach((n=>{if("constructor"===n)return;const r=Object.getOwnPropertyDescriptor(e,n);r&&(r.get||r.set)?Object.defineProperty(ua.prototype,n,r):ua.prototype[n]=t.prototype[n]}))}));class da extends la{constructor(t,e=sa){const n=Ln(e);n.outputCst=!0,super(t,n)}}class fa extends la{constructor(t,e=sa){const n=Ln(e);n.outputCst=!1,super(t,n)}}class pa extends wo{visitRule(t){const e=this.visitEach(t.definition),n=Bo(e,(t=>t.propertyName)),r=Ve(n,((t,e)=>{const n=!Pr(t,(t=>!t.canBeNull));let r=t[0].type;return t.length>1&&(r=Ve(t,(t=>t.type))),{name:e,type:r,optional:n}}));return{name:t.name,properties:r}}visitAlternative(t){return this.visitEachAndOverrideWith(t.definition,{canBeNull:!0})}visitOption(t){return this.visitEachAndOverrideWith(t.definition,{canBeNull:!0})}visitRepetition(t){return this.visitEachAndOverrideWith(t.definition,{canBeNull:!0})}visitRepetitionMandatory(t){return this.visitEach(t.definition)}visitRepetitionMandatoryWithSeparator(t){return this.visitEach(t.definition).concat({propertyName:t.separator.name,canBeNull:!0,type:ma(t.separator)})}visitRepetitionWithSeparator(t){return this.visitEachAndOverrideWith(t.definition,{canBeNull:!0}).concat({propertyName:t.separator.name,canBeNull:!0,type:ma(t.separator)})}visitAlternation(t){return this.visitEachAndOverrideWith(t.definition,{canBeNull:!0})}visitTerminal(t){return[{propertyName:t.label||t.terminalType.name,canBeNull:!1,type:ma(t)}]}visitNonTerminal(t){return[{propertyName:t.label||t.nonTerminalName,canBeNull:!1,type:ma(t)}]}visitEachAndOverrideWith(t,e){return Ve(this.visitEach(t),(t=>Jn({},t,e)))}visitEach(t){return Cr(Ve(t,(t=>this.visit(t))))}}function ma(t){return t instanceof sr?{kind:"rule",name:t.referencedRule.name}:{kind:"token"}}var Ta=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Ea=function(t){return Ta.test(t)};var ga="\\ud800-\\udfff",va="["+ga+"]",ya="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Aa="\\ud83c[\\udffb-\\udfff]",Ra="[^"+ga+"]",Ia="(?:\\ud83c[\\udde6-\\uddff]){2}",Na="[\\ud800-\\udbff][\\udc00-\\udfff]",Oa="(?:"+ya+"|"+Aa+")?",_a="[\\ufe0e\\ufe0f]?",Sa=_a+Oa+"(?:\\u200d(?:"+[Ra,Ia,Na].join("|")+")"+_a+Oa+")*",ka="(?:"+[Ra+ya+"?",ya,Ia,Na,va].join("|")+")",La=RegExp(Aa+"(?="+Aa+")|"+ka+Sa,"g");const xa=function(t){return Ea(t)?function(t){return t.match(La)||[]}(t):function(t){return t.split("")}(t)},Ca=function(t){t=Ue(t);var e,n,r,i,o=Ea(t)?xa(t):void 0,s=o?o[0]:t.charAt(0),a=o?(e=o,n=1,i=e.length,r=void 0===r?i:r,!n&&r>=i?e:Cn(e,n,r)).join(""):t.slice(1);return s.toUpperCase()+a};function ba(t){return"token"===t.kind?"IToken":Pa(t.name)}function Pa(t){return Ca(t)+"CstNode"}function Ma(t){return Ca(t)+"CstChildren"}const wa={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function Ua(t,e){const n=Object.assign(Object.assign({},wa),e),r=function(t){const e=new pa,n=et(t);return Ve(n,(t=>e.visitRule(t)))}(t);return function(t,e){let n=[];return n=n.concat('import type { CstNode, ICstVisitor, IToken } from "chevrotain";'),n=n.concat(Cr(Ve(t,(t=>function(t){const e=function(t){const e=Pa(t.name),n=Ma(t.name);return`export interface ${e} extends CstNode {\n  name: "${t.name}";\n  children: ${n};\n}`}(t),n=function(t){return`export type ${Ma(t.name)} = {\n  ${Ve(t.properties,(t=>function(t){const e=function(t){if(I(t)){const e=Sr(Ve(t,(t=>ba(t))));return"("+fi(e,((t,e)=>t+" | "+e))+")"}return ba(t)}(t.type);return`${t.name}${t.optional?"?":""}: ${e}[];`}(t))).join("\n  ")}\n};`}(t);return[e,n]}(t))))),e.includeVisitorInterface&&(n=n.concat(`export interface ${e.visitorInterfaceName}<IN, OUT> extends ICstVisitor<IN, OUT> {\n  ${Ve(t,(t=>function(t){const e=Ma(t.name);return`${t.name}(children: ${e}, param?: IN): OUT;`}(t))).join("\n  ")}\n}`)),n.join("\n\n")+"\n"}(r,n)}function Da(t,{resourceBase:e=`https://unpkg.com/chevrotain@${n}/diagrams/`,css:r=`https://unpkg.com/chevrotain@${n}/diagrams/diagrams.css`}={}){return`\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset="utf-8">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n\n<link rel='stylesheet' href='${r}'>\n\n<script src='${e}vendor/railroad-diagrams.js'><\/script>\n<script src='${e}src/diagrams_builder.js'><\/script>\n<script src='${e}src/diagrams_behavior.js'><\/script>\n<script src='${e}src/main.js'><\/script>\n\n<div id="diagrams" align="center"></div>    \n\n<script>\n    window.serializedGrammar = ${JSON.stringify(t,null,"  ")};\n<\/script>\n\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n`}function Fa(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")}class ja{constructor(){throw new Error("The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\t\nSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0")}}return e})()));